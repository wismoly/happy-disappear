{"version":3,"sources":["assets/Script/Controller/LoginController.js"],"names":["cc","Class","Component","properties","loadingBar","type","ProgressBar","loginButton","Button","worldSceneBGM","AudioClip","onLoad","gameSceneBGMAudioId","audioEngine","play","onLogin","last","node","active","progress","barSprite","fillRange","loader","onProgress","count","amount","item","toFixed","director","preloadScene","loadScene","bind","onDestroy","stop"],"mappings":";;;;;;AAAA;;;;AAEAA,EAAE,CAACC,KAAH,CAAS;AACP,aAASD,EAAE,CAACE,SADL;AAGPC,EAAAA,UAAU,EAAE;AACVC,IAAAA,UAAU,EAAE;AACVC,MAAAA,IAAI,EAAEL,EAAE,CAACM,WADC;AAEV,iBAAS;AAFC,KADF;AAKVC,IAAAA,WAAW,EAAE;AACXF,MAAAA,IAAI,EAAEL,EAAE,CAACQ,MADE;AAEX,iBAAS;AAFE,KALH;AASVC,IAAAA,aAAa,EAAE;AACbJ,MAAAA,IAAI,EAAEL,EAAE,CAACU,SADI;AAEb,iBAAS;AAFI;AATL,GAHL;AAkBPC,EAAAA,MAlBO,oBAkBE;AACP,SAAKC,mBAAL,GAA2BZ,EAAE,CAACa,WAAH,CAAeC,IAAf,CAAoB,KAAKL,aAAzB,EAAwC,IAAxC,EAA8C,CAA9C,CAA3B;AACD,GApBM;AAsBPM,EAAAA,OAAO,EAAE,mBAAY;AAAA;;AACnB,SAAKC,IAAL,GAAY,CAAZ;AACA,SAAKZ,UAAL,CAAgBa,IAAhB,CAAqBC,MAArB,GAA8B,IAA9B;AACA,SAAKX,WAAL,CAAiBU,IAAjB,CAAsBC,MAAtB,GAA+B,KAA/B;AACA,SAAKd,UAAL,CAAgBe,QAAhB,GAA2B,CAA3B;AACA,SAAKf,UAAL,CAAgBgB,SAAhB,CAA0BC,SAA1B,GAAsC,CAAtC;;AACArB,IAAAA,EAAE,CAACsB,MAAH,CAAUC,UAAV,GAAuB,UAACC,KAAD,EAAQC,MAAR,EAAgBC,IAAhB,EAAyB;AAC9C,UAAIP,QAAQ,GAAG,CAACK,KAAK,GAAGC,MAAT,EAAiBE,OAAjB,CAAyB,CAAzB,CAAf;;AACA,UAAIR,QAAQ,GAAG,KAAI,CAACf,UAAL,CAAgBgB,SAAhB,CAA0BC,SAAzC,EAAoD;AAClD,QAAA,KAAI,CAACjB,UAAL,CAAgBgB,SAAhB,CAA0BC,SAA1B,GAAsCG,KAAK,GAAGC,MAA9C;AACD;AACF,KALD;;AAMAzB,IAAAA,EAAE,CAAC4B,QAAH,CAAYC,YAAZ,CAAyB,MAAzB,EAAiC,YAAY;AAC3C,WAAKzB,UAAL,CAAgBa,IAAhB,CAAqBC,MAArB,GAA8B,KAA9B;AACA,WAAKX,WAAL,CAAiBU,IAAjB,CAAsBC,MAAtB,GAA+B,KAA/B,CAF2C,CAG3C;;AACAlB,MAAAA,EAAE,CAAC4B,QAAH,CAAYE,SAAZ,CAAsB,MAAtB;AACD,KALgC,CAK/BC,IAL+B,CAK1B,IAL0B,CAAjC;AAMD,GAxCM;AA0CPC,EAAAA,SAAS,EAAE,qBAAY;AACrBhC,IAAAA,EAAE,CAACa,WAAH,CAAeoB,IAAf,CAAoB,KAAKrB,mBAAzB;AACD;AA5CM,CAAT","sourceRoot":"/","sourcesContent":["import AudioUtils from \"../Utils/AudioUtils\";\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    loadingBar: {\n      type: cc.ProgressBar,\n      default: null,\n    },\n    loginButton: {\n      type: cc.Button,\n      default: null,\n    },\n    worldSceneBGM: {\n      type: cc.AudioClip,\n      default: null,\n    }\n  },\n\n  onLoad() {\n    this.gameSceneBGMAudioId = cc.audioEngine.play(this.worldSceneBGM, true, 1);\n  },\n\n  onLogin: function () {\n    this.last = 0;\n    this.loadingBar.node.active = true;\n    this.loginButton.node.active = false;\n    this.loadingBar.progress = 0;\n    this.loadingBar.barSprite.fillRange = 0;\n    cc.loader.onProgress = (count, amount, item) => {\n      let progress = (count / amount).toFixed(2);\n      if (progress > this.loadingBar.barSprite.fillRange) {\n        this.loadingBar.barSprite.fillRange = count / amount;\n      }\n    };\n    cc.director.preloadScene(\"Game\", function () {\n      this.loadingBar.node.active = false;\n      this.loginButton.node.active = false;\n      // cc.log(\"加载成功\");\n      cc.director.loadScene(\"Game\");\n    }.bind(this));\n  },\n\n  onDestroy: function () {\n    cc.audioEngine.stop(this.gameSceneBGMAudioId);\n  }\n});\n"]}