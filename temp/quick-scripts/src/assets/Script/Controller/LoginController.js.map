{"version":3,"sources":["assets/Script/Controller/LoginController.js"],"names":["cc","Class","Component","properties","loadingBar","type","ProgressBar","loginButton","Button","worldSceneBGM","AudioClip","onLoad","gameSceneBGMAudioId","audioEngine","play","start","onLogin","node","active","progress","backup","loader","onProgress","count","amount","bind","director","preloadScene","loadScene","onDestroy","stop"],"mappings":";;;;;;AAUA;;;;AAVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,IAAAA,UAAU,EAAE;AACRC,MAAAA,IAAI,EAAEL,EAAE,CAACM,WADD;AAER,iBAAS;AAFD,KAhBJ;AAoBRC,IAAAA,WAAW,EAAE;AACTF,MAAAA,IAAI,EAAEL,EAAE,CAACQ,MADA;AAET,iBAAS;AAFA,KApBL;AAwBRC,IAAAA,aAAa,EAAC;AACVJ,MAAAA,IAAI,EAAEL,EAAE,CAACU,SADC;AAEV,iBAAS;AAFC;AAxBN,GAHP;AAiCL;AAEAC,EAAAA,MAnCK,oBAmCK;AACN,SAAKC,mBAAL,GAA2BZ,EAAE,CAACa,WAAH,CAAeC,IAAf,CAAoB,KAAKL,aAAzB,EAAwC,IAAxC,EAA8C,CAA9C,CAA3B;AACH,GArCI;AAuCLM,EAAAA,KAvCK,mBAuCI,CAER,CAzCI;AA2CLC,EAAAA,OAAO,EAAE,mBAAU;AACf,SAAKZ,UAAL,CAAgBa,IAAhB,CAAqBC,MAArB,GAA8B,IAA9B;AACA,SAAKX,WAAL,CAAiBU,IAAjB,CAAsBC,MAAtB,GAA+B,KAA/B;AACA,SAAKd,UAAL,CAAgBe,QAAhB,GAA2B,CAA3B;AACA,QAAIC,MAAM,GAAGpB,EAAE,CAACqB,MAAH,CAAUC,UAAvB;;AACAtB,IAAAA,EAAE,CAACqB,MAAH,CAAUC,UAAV,GAAuB,UAAUC,KAAV,EAAiBC,MAAjB,EAAyB;AAC5C,WAAKpB,UAAL,CAAgBe,QAAhB,GAA2BI,KAAK,GAAGC,MAAnC;AACH,KAFsB,CAErBC,IAFqB,CAEhB,IAFgB,CAAvB;;AAIAzB,IAAAA,EAAE,CAAC0B,QAAH,CAAYC,YAAZ,CAAyB,MAAzB,EAAiC,YAAY;AACzC3B,MAAAA,EAAE,CAACqB,MAAH,CAAUC,UAAV,GAAuBF,MAAvB;AACA,WAAKhB,UAAL,CAAgBa,IAAhB,CAAqBC,MAArB,GAA8B,KAA9B;AACA,WAAKX,WAAL,CAAiBU,IAAjB,CAAsBC,MAAtB,GAA+B,IAA/B;AACAlB,MAAAA,EAAE,CAAC0B,QAAH,CAAYE,SAAZ,CAAsB,MAAtB;AACH,KALgC,CAK/BH,IAL+B,CAK1B,IAL0B,CAAjC;AAMH,GA1DI;AA4DLI,EAAAA,SAAS,EAAE,qBAAU;AACjB7B,IAAAA,EAAE,CAACa,WAAH,CAAeiB,IAAf,CAAoB,KAAKlB,mBAAzB;AACH,GA9DI,CAgEL;;AAhEK,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\nimport AudioUtils from \"../Utils/AudioUtils\";\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        loadingBar: {\n            type: cc.ProgressBar,\n            default: null,\n        },\n        loginButton: {\n            type: cc.Button,\n            default: null,\n        },\n        worldSceneBGM:{\n            type: cc.AudioClip,\n            default: null,\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.gameSceneBGMAudioId = cc.audioEngine.play(this.worldSceneBGM, true, 1);\n    },\n\n    start () {\n\n    },\n\n    onLogin: function(){\n        this.loadingBar.node.active = true;\n        this.loginButton.node.active = false;\n        this.loadingBar.progress = 0;\n        let backup = cc.loader.onProgress;\n        cc.loader.onProgress = function (count, amount) {\n            this.loadingBar.progress = count / amount;\n        }.bind(this);\n\n        cc.director.preloadScene(\"Game\", function () {\n            cc.loader.onProgress = backup;\n            this.loadingBar.node.active = false;\n            this.loginButton.node.active = true;\n            cc.director.loadScene(\"Game\");\n        }.bind(this));\n    },\n\n    onDestroy: function(){\n        cc.audioEngine.stop(this.gameSceneBGMAudioId);\n    }\n\n    // update (dt) {},\n});\n"]}