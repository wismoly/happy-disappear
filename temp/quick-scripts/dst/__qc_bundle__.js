
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/__qc_index__.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}
require('./assets/Script/Controller/GameController');
require('./assets/Script/Controller/LoginController');
require('./assets/Script/Model/CellModel');
require('./assets/Script/Model/ConstValue');
require('./assets/Script/Model/GameModel');
require('./assets/Script/UnitTest/GameModelTest');
require('./assets/Script/Utils/AudioUtils');
require('./assets/Script/Utils/ModelUtils');
require('./assets/Script/Utils/Toast');
require('./assets/Script/View/CellView');
require('./assets/Script/View/EffectLayer');
require('./assets/Script/View/GridView');
require('./assets/migration/use_v2.0.x_cc.Toggle_event');

                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/migration/use_v2.0.x_cc.Toggle_event.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '6a67b9H1IdAuJd6PInpnviU', 'use_v2.0.x_cc.Toggle_event');
// migration/use_v2.0.x_cc.Toggle_event.js

"use strict";

/*
 * This script is automatically generated by Cocos Creator and is only compatible with projects prior to v2.1.0.
 * You do not need to manually add this script in any other project.
 * If you don't use cc.Toggle in your project, you can delete this script directly.
 * If your project is hosted in VCS such as git, submit this script together.
 *
 * 此脚本由 Cocos Creator 自动生成，仅用于兼容 v2.1.0 之前版本的工程，
 * 你无需在任何其它项目中手动添加此脚本。
 * 如果你的项目中没用到 Toggle，可直接删除该脚本。
 * 如果你的项目有托管于 git 等版本库，请将此脚本一并上传。
 */
if (cc.Toggle) {
  // Whether the 'toggle' and 'checkEvents' events are fired when 'toggle.check() / toggle.uncheck()' is called in the code
  // 在代码中调用 'toggle.check() / toggle.uncheck()' 时是否触发 'toggle' 与 'checkEvents' 事件
  cc.Toggle._triggerEventInScript_check = true;
}

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9taWdyYXRpb24vdXNlX3YyLjAueF9jYy5Ub2dnbGVfZXZlbnQuanMiXSwibmFtZXMiOlsiY2MiLCJUb2dnbGUiLCJfdHJpZ2dlckV2ZW50SW5TY3JpcHRfY2hlY2siXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7O0FBWUEsSUFBSUEsRUFBRSxDQUFDQyxNQUFQLEVBQWU7QUFDWDtBQUNBO0FBQ0FELEVBQUFBLEVBQUUsQ0FBQ0MsTUFBSCxDQUFVQywyQkFBVixHQUF3QyxJQUF4QztBQUNIIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogVGhpcyBzY3JpcHQgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgQ29jb3MgQ3JlYXRvciBhbmQgaXMgb25seSBjb21wYXRpYmxlIHdpdGggcHJvamVjdHMgcHJpb3IgdG8gdjIuMS4wLlxuICogWW91IGRvIG5vdCBuZWVkIHRvIG1hbnVhbGx5IGFkZCB0aGlzIHNjcmlwdCBpbiBhbnkgb3RoZXIgcHJvamVjdC5cbiAqIElmIHlvdSBkb24ndCB1c2UgY2MuVG9nZ2xlIGluIHlvdXIgcHJvamVjdCwgeW91IGNhbiBkZWxldGUgdGhpcyBzY3JpcHQgZGlyZWN0bHkuXG4gKiBJZiB5b3VyIHByb2plY3QgaXMgaG9zdGVkIGluIFZDUyBzdWNoIGFzIGdpdCwgc3VibWl0IHRoaXMgc2NyaXB0IHRvZ2V0aGVyLlxuICpcbiAqIOatpOiEmuacrOeUsSBDb2NvcyBDcmVhdG9yIOiHquWKqOeUn+aIkO+8jOS7heeUqOS6juWFvOWuuSB2Mi4xLjAg5LmL5YmN54mI5pys55qE5bel56iL77yMXG4gKiDkvaDml6DpnIDlnKjku7vkvZXlhbblroPpobnnm67kuK3miYvliqjmt7vliqDmraTohJrmnKzjgIJcbiAqIOWmguaenOS9oOeahOmhueebruS4reayoeeUqOWIsCBUb2dnbGXvvIzlj6/nm7TmjqXliKDpmaTor6XohJrmnKzjgIJcbiAqIOWmguaenOS9oOeahOmhueebruacieaJmOeuoeS6jiBnaXQg562J54mI5pys5bqT77yM6K+35bCG5q2k6ISa5pys5LiA5bm25LiK5Lyg44CCXG4gKi9cblxuaWYgKGNjLlRvZ2dsZSkge1xuICAgIC8vIFdoZXRoZXIgdGhlICd0b2dnbGUnIGFuZCAnY2hlY2tFdmVudHMnIGV2ZW50cyBhcmUgZmlyZWQgd2hlbiAndG9nZ2xlLmNoZWNrKCkgLyB0b2dnbGUudW5jaGVjaygpJyBpcyBjYWxsZWQgaW4gdGhlIGNvZGVcbiAgICAvLyDlnKjku6PnoIHkuK3osIPnlKggJ3RvZ2dsZS5jaGVjaygpIC8gdG9nZ2xlLnVuY2hlY2soKScg5pe25piv5ZCm6Kem5Y+RICd0b2dnbGUnIOS4jiAnY2hlY2tFdmVudHMnIOS6i+S7tlxuICAgIGNjLlRvZ2dsZS5fdHJpZ2dlckV2ZW50SW5TY3JpcHRfY2hlY2sgPSB0cnVlO1xufVxuIl19
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Model/GameModel.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'cc442HaMlBE/ZKi7W/YUKwd', 'GameModel');
// Script/Model/GameModel.js

"use strict";

exports.__esModule = true;
exports["default"] = void 0;

var _CellModel = _interopRequireDefault(require("./CellModel"));

var _ModelUtils = require("../Utils/ModelUtils");

var _ConstValue = require("./ConstValue");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var GameModel = /*#__PURE__*/function () {
  function GameModel() {
    this.cells = null;
    this.cellBgs = null;
    this.lastPos = cc.v2(-1, -1);
    this.cellTypeNum = 5;
    this.cellCreateType = []; // 升成种类只在这个数组里面查找
  }

  var _proto = GameModel.prototype;

  _proto.init = function init(cellTypeNum) {
    this.cells = [];
    this.setCellTypeNum(cellTypeNum || this.cellTypeNum);

    for (var i = 1; i <= _ConstValue.GRID_WIDTH; i++) {
      this.cells[i] = [];

      for (var j = 1; j <= _ConstValue.GRID_HEIGHT; j++) {
        this.cells[i][j] = new _CellModel["default"]();
      }
    } // this.mock();


    for (var i = 1; i <= _ConstValue.GRID_WIDTH; i++) {
      for (var j = 1; j <= _ConstValue.GRID_HEIGHT; j++) {
        //已经被mock数据生成了
        if (this.cells[i][j].type != null) {
          continue;
        }

        var flag = true;

        while (flag) {
          flag = false;
          this.cells[i][j].init(this.getRandomCellType());
          var result = this.checkPoint(j, i)[0];

          if (result.length > 2) {
            flag = true;
          }

          this.cells[i][j].setXY(j, i);
          this.cells[i][j].setStartXY(j, i);
        }
      }
    }
  };

  _proto.mock = function mock() {
    this.mockInit(5, 1, _ConstValue.CELL_TYPE.A);
    this.mockInit(5, 3, _ConstValue.CELL_TYPE.A);
    this.mockInit(4, 2, _ConstValue.CELL_TYPE.A);
    this.mockInit(3, 2, _ConstValue.CELL_TYPE.A);
    this.mockInit(5, 2, _ConstValue.CELL_TYPE.B);
    this.mockInit(6, 2, _ConstValue.CELL_TYPE.B);
    this.mockInit(7, 3, _ConstValue.CELL_TYPE.B);
    this.mockInit(8, 2, _ConstValue.CELL_TYPE.A);
  };

  _proto.mockInit = function mockInit(x, y, type) {
    this.cells[x][y].init(type);
    this.cells[x][y].setXY(y, x);
    this.cells[x][y].setStartXY(y, x);
  };

  _proto.initWithData = function initWithData(data) {// to do
  }
  /**
   *
   * @param x
   * @param y
   * @param recursive 是否递归查找
   * @returns {([]|string|*)[]}
   */
  ;

  _proto.checkPoint = function checkPoint(x, y, recursive) {
    var rowResult = this.checkWithDirection(x, y, [cc.v2(1, 0), cc.v2(-1, 0)]);
    var colResult = this.checkWithDirection(x, y, [cc.v2(0, -1), cc.v2(0, 1)]);
    var samePoints = [];
    var newCellStatus = "";

    if (rowResult.length >= 5 || colResult.length >= 5) {
      newCellStatus = _ConstValue.CELL_STATUS.BIRD;
    } else if (rowResult.length >= 3 && colResult.length >= 3) {
      newCellStatus = _ConstValue.CELL_STATUS.WRAP;
    } else if (rowResult.length >= 4) {
      newCellStatus = _ConstValue.CELL_STATUS.LINE;
    } else if (colResult.length >= 4) {
      newCellStatus = _ConstValue.CELL_STATUS.COLUMN;
    }

    if (rowResult.length >= 3) {
      samePoints = rowResult;
    }

    if (colResult.length >= 3) {
      samePoints = (0, _ModelUtils.mergePointArray)(samePoints, colResult);
    }

    var result = [samePoints, newCellStatus, this.cells[y][x].type, cc.v2(x, y)]; // 检查一下消除的其他节点， 能不能生成更大范围的消除

    if (recursive && result.length >= 3) {
      var subCheckPoints = (0, _ModelUtils.exclusivePoint)(samePoints, cc.v2(x, y));

      for (var _iterator = _createForOfIteratorHelperLoose(subCheckPoints), _step; !(_step = _iterator()).done;) {
        var point = _step.value;
        var subResult = this.checkPoint(point.x, point.y, false);

        if (subResult[1] > result[1] || subResult[1] === result[1] && subResult[0].length > result[0].length) {
          result = subResult;
        }
      }
    }

    return result;
  };

  _proto.checkWithDirection = function checkWithDirection(x, y, direction) {
    var queue = [];
    var vis = [];
    vis[x + y * 9] = true;
    queue.push(cc.v2(x, y));
    var front = 0;

    while (front < queue.length) {
      //let direction = [cc.v2(0, -1), cc.v2(0, 1), cc.v2(1, 0), cc.v2(-1, 0)];
      var point = queue[front];
      var cellModel = this.cells[point.y][point.x];
      front++;

      if (!cellModel) {
        continue;
      }

      for (var i = 0; i < direction.length; i++) {
        var tmpX = point.x + direction[i].x;
        var tmpY = point.y + direction[i].y;

        if (tmpX < 1 || tmpX > 9 || tmpY < 1 || tmpY > 9 || vis[tmpX + tmpY * 9] || !this.cells[tmpY][tmpX]) {
          continue;
        }

        if (cellModel.type === this.cells[tmpY][tmpX].type) {
          vis[tmpX + tmpY * 9] = true;
          queue.push(cc.v2(tmpX, tmpY));
        }
      }
    }

    return queue;
  };

  _proto.printInfo = function printInfo() {
    for (var i = 1; i <= 9; i++) {
      var printStr = "";

      for (var j = 1; j <= 9; j++) {
        printStr += this.cells[i][j].type + " ";
      }

      console.log(printStr);
    }
  };

  _proto.getCells = function getCells() {
    return this.cells;
  } // controller调用的主要入口
  // 点击某个格子
  ;

  _proto.selectCell = function selectCell(pos) {
    this.changeModels = []; // 发生改变的model，将作为返回值，给view播动作

    this.effectsQueue = []; // 动物消失，爆炸等特效

    var lastPos = this.lastPos;
    var delta = Math.abs(pos.x - lastPos.x) + Math.abs(pos.y - lastPos.y);

    if (delta != 1) {
      //非相邻格子， 直接返回
      this.lastPos = pos;
      return [[], []];
    }

    var curClickCell = this.cells[pos.y][pos.x]; //当前点击的格子

    var lastClickCell = this.cells[lastPos.y][lastPos.x]; // 上一次点击的格式

    this.exchangeCell(lastPos, pos);
    var result1 = this.checkPoint(pos.x, pos.y)[0];
    var result2 = this.checkPoint(lastPos.x, lastPos.y)[0];
    this.curTime = 0; // 动画播放的当前时间

    this.pushToChangeModels(curClickCell);
    this.pushToChangeModels(lastClickCell);
    var isCanBomb = curClickCell.status != _ConstValue.CELL_STATUS.COMMON && // 判断两个是否是特殊的动物
    lastClickCell.status != _ConstValue.CELL_STATUS.COMMON || curClickCell.status == _ConstValue.CELL_STATUS.BIRD || lastClickCell.status == _ConstValue.CELL_STATUS.BIRD;

    if (result1.length < 3 && result2.length < 3 && !isCanBomb) {
      //不会发生消除的情况
      this.exchangeCell(lastPos, pos);
      curClickCell.moveToAndBack(lastPos);
      lastClickCell.moveToAndBack(pos);
      this.lastPos = cc.v2(-1, -1);
      return [this.changeModels];
    } else {
      this.lastPos = cc.v2(-1, -1);
      curClickCell.moveTo(lastPos, this.curTime);
      lastClickCell.moveTo(pos, this.curTime);
      var checkPoint = [pos, lastPos];
      this.curTime += _ConstValue.ANITIME.TOUCH_MOVE;
      this.processCrush(checkPoint);
      return [this.changeModels, this.effectsQueue];
    }
  } // 消除
  ;

  _proto.processCrush = function processCrush(checkPoint) {
    var cycleCount = 0;

    while (checkPoint.length > 0) {
      var bombModels = [];

      if (cycleCount == 0 && checkPoint.length == 2) {
        //特殊消除
        var pos1 = checkPoint[0];
        var pos2 = checkPoint[1];
        var model1 = this.cells[pos1.y][pos1.x];
        var model2 = this.cells[pos2.y][pos2.x];

        if (model1.status == _ConstValue.CELL_STATUS.BIRD || model2.status == _ConstValue.CELL_STATUS.BIRD) {
          var bombModel = null;

          if (model1.status == _ConstValue.CELL_STATUS.BIRD) {
            model1.type = model2.type;
            bombModels.push(model1);
          } else {
            model2.type = model1.type;
            bombModels.push(model2);
          }
        }
      }

      for (var i in checkPoint) {
        var pos = checkPoint[i];

        if (!this.cells[pos.y][pos.x]) {
          continue;
        }

        var _this$checkPoint = this.checkPoint(pos.x, pos.y, true),
            result = _this$checkPoint[0],
            newCellStatus = _this$checkPoint[1],
            newCellType = _this$checkPoint[2],
            crushPoint = _this$checkPoint[3];

        if (result.length < 3) {
          continue;
        }

        for (var j in result) {
          var model = this.cells[result[j].y][result[j].x];
          this.crushCell(result[j].x, result[j].y, false, cycleCount);

          if (model.status != _ConstValue.CELL_STATUS.COMMON) {
            bombModels.push(model);
          }
        }

        this.createNewCell(crushPoint, newCellStatus, newCellType);
      }

      this.processBomb(bombModels, cycleCount);
      this.curTime += _ConstValue.ANITIME.DIE;
      checkPoint = this.down();
      cycleCount++;
    }
  } //生成新cell
  ;

  _proto.createNewCell = function createNewCell(pos, status, type) {
    if (status == "") {
      return;
    }

    if (status == _ConstValue.CELL_STATUS.BIRD) {
      type = _ConstValue.CELL_TYPE.BIRD;
    }

    var model = new _CellModel["default"]();
    this.cells[pos.y][pos.x] = model;
    model.init(type);
    model.setStartXY(pos.x, pos.y);
    model.setXY(pos.x, pos.y);
    model.setStatus(status);
    model.setVisible(0, false);
    model.setVisible(this.curTime, true);
    this.changeModels.push(model);
  } // 下落
  ;

  _proto.down = function down() {
    var newCheckPoint = [];

    for (var i = 1; i <= _ConstValue.GRID_WIDTH; i++) {
      for (var j = 1; j <= _ConstValue.GRID_HEIGHT; j++) {
        if (this.cells[i][j] == null) {
          var curRow = i;

          for (var k = curRow; k <= _ConstValue.GRID_HEIGHT; k++) {
            if (this.cells[k][j]) {
              this.pushToChangeModels(this.cells[k][j]);
              newCheckPoint.push(this.cells[k][j]);
              this.cells[curRow][j] = this.cells[k][j];
              this.cells[k][j] = null;
              this.cells[curRow][j].setXY(j, curRow);
              this.cells[curRow][j].moveTo(cc.v2(j, curRow), this.curTime);
              curRow++;
            }
          }

          var count = 1;

          for (var k = curRow; k <= _ConstValue.GRID_HEIGHT; k++) {
            this.cells[k][j] = new _CellModel["default"]();
            this.cells[k][j].init(this.getRandomCellType());
            this.cells[k][j].setStartXY(j, count + _ConstValue.GRID_HEIGHT);
            this.cells[k][j].setXY(j, count + _ConstValue.GRID_HEIGHT);
            this.cells[k][j].moveTo(cc.v2(j, k), this.curTime);
            count++;
            this.changeModels.push(this.cells[k][j]);
            newCheckPoint.push(this.cells[k][j]);
          }
        }
      }
    }

    this.curTime += _ConstValue.ANITIME.TOUCH_MOVE + 0.3;
    return newCheckPoint;
  };

  _proto.pushToChangeModels = function pushToChangeModels(model) {
    if (this.changeModels.indexOf(model) != -1) {
      return;
    }

    this.changeModels.push(model);
  };

  _proto.cleanCmd = function cleanCmd() {
    for (var i = 1; i <= _ConstValue.GRID_WIDTH; i++) {
      for (var j = 1; j <= _ConstValue.GRID_HEIGHT; j++) {
        if (this.cells[i][j]) {
          this.cells[i][j].cmd = [];
        }
      }
    }
  };

  _proto.exchangeCell = function exchangeCell(pos1, pos2) {
    var tmpModel = this.cells[pos1.y][pos1.x];
    this.cells[pos1.y][pos1.x] = this.cells[pos2.y][pos2.x];
    this.cells[pos1.y][pos1.x].x = pos1.x;
    this.cells[pos1.y][pos1.x].y = pos1.y;
    this.cells[pos2.y][pos2.x] = tmpModel;
    this.cells[pos2.y][pos2.x].x = pos2.x;
    this.cells[pos2.y][pos2.x].y = pos2.y;
  } // 设置种类
  // Todo 改成乱序算法
  ;

  _proto.setCellTypeNum = function setCellTypeNum(num) {
    console.log("num = ", num);
    this.cellTypeNum = num;
    this.cellCreateType = [];
    var createTypeList = this.cellCreateType;

    for (var i = 1; i <= _ConstValue.CELL_BASENUM; i++) {
      createTypeList.push(i);
    }

    for (var _i = 0; _i < createTypeList.length; _i++) {
      var index = Math.floor(Math.random() * (_ConstValue.CELL_BASENUM - _i)) + _i;

      createTypeList[_i], createTypeList[index] = createTypeList[index], createTypeList[_i];
    }
  } // 随要生成一个类型
  ;

  _proto.getRandomCellType = function getRandomCellType() {
    var index = Math.floor(Math.random() * this.cellTypeNum);
    return this.cellCreateType[index];
  } // TODO bombModels去重
  ;

  _proto.processBomb = function processBomb(bombModels, cycleCount) {
    var _this = this;

    var _loop = function _loop() {
      var newBombModel = [];
      var bombTime = _ConstValue.ANITIME.BOMB_DELAY;
      bombModels.forEach(function (model) {
        if (model.status == _ConstValue.CELL_STATUS.LINE) {
          for (var i = 1; i <= _ConstValue.GRID_WIDTH; i++) {
            if (this.cells[model.y][i]) {
              if (this.cells[model.y][i].status != _ConstValue.CELL_STATUS.COMMON) {
                newBombModel.push(this.cells[model.y][i]);
              }

              this.crushCell(i, model.y, false, cycleCount);
            }
          }

          this.addRowBomb(this.curTime, cc.v2(model.x, model.y));
        } else if (model.status == _ConstValue.CELL_STATUS.COLUMN) {
          for (var _i2 = 1; _i2 <= _ConstValue.GRID_HEIGHT; _i2++) {
            if (this.cells[_i2][model.x]) {
              if (this.cells[_i2][model.x].status != _ConstValue.CELL_STATUS.COMMON) {
                newBombModel.push(this.cells[_i2][model.x]);
              }

              this.crushCell(model.x, _i2, false, cycleCount);
            }
          }

          this.addColBomb(this.curTime, cc.v2(model.x, model.y));
        } else if (model.status == _ConstValue.CELL_STATUS.WRAP) {
          var x = model.x;
          var y = model.y;

          for (var _i3 = 1; _i3 <= _ConstValue.GRID_HEIGHT; _i3++) {
            for (var j = 1; j <= _ConstValue.GRID_WIDTH; j++) {
              var delta = Math.abs(x - j) + Math.abs(y - _i3);

              if (this.cells[_i3][j] && delta <= 2) {
                if (this.cells[_i3][j].status != _ConstValue.CELL_STATUS.COMMON) {
                  newBombModel.push(this.cells[_i3][j]);
                }

                this.crushCell(j, _i3, false, cycleCount);
              }
            }
          }
        } else if (model.status == _ConstValue.CELL_STATUS.BIRD) {
          var crushType = model.type;

          if (bombTime < _ConstValue.ANITIME.BOMB_BIRD_DELAY) {
            bombTime = _ConstValue.ANITIME.BOMB_BIRD_DELAY;
          }

          if (crushType == _ConstValue.CELL_TYPE.BIRD) {
            crushType = this.getRandomCellType();
          }

          for (var _i4 = 1; _i4 <= _ConstValue.GRID_HEIGHT; _i4++) {
            for (var _j = 1; _j <= _ConstValue.GRID_WIDTH; _j++) {
              if (this.cells[_i4][_j] && this.cells[_i4][_j].type == crushType) {
                if (this.cells[_i4][_j].status != _ConstValue.CELL_STATUS.COMMON) {
                  newBombModel.push(this.cells[_i4][_j]);
                }

                this.crushCell(_j, _i4, true, cycleCount);
              }
            }
          } //this.crushCell(model.x, model.y);

        }
      }, _this);

      if (bombModels.length > 0) {
        _this.curTime += bombTime;
      }

      bombModels = newBombModel;
    };

    while (bombModels.length > 0) {
      _loop();
    }
  }
  /**
   * 
   * @param {开始播放的时间} playTime 
   * @param {*cell位置} pos 
   * @param {*第几次消除，用于播放音效} step 
   */
  ;

  _proto.addCrushEffect = function addCrushEffect(playTime, pos, step) {
    this.effectsQueue.push({
      playTime: playTime,
      pos: pos,
      action: "crush",
      step: step
    });
  };

  _proto.addRowBomb = function addRowBomb(playTime, pos) {
    this.effectsQueue.push({
      playTime: playTime,
      pos: pos,
      action: "rowBomb"
    });
  };

  _proto.addColBomb = function addColBomb(playTime, pos) {
    this.effectsQueue.push({
      playTime: playTime,
      pos: pos,
      action: "colBomb"
    });
  };

  _proto.addWrapBomb = function addWrapBomb(playTime, pos) {// TODO
  } // cell消除逻辑
  ;

  _proto.crushCell = function crushCell(x, y, needShake, step) {
    var model = this.cells[y][x];
    this.pushToChangeModels(model);

    if (needShake) {
      model.toShake(this.curTime);
    }

    var shakeTime = needShake ? _ConstValue.ANITIME.DIE_SHAKE : 0;
    model.toDie(this.curTime + shakeTime);
    this.addCrushEffect(this.curTime + shakeTime, cc.v2(model.x, model.y), step);
    this.cells[y][x] = null;
  };

  return GameModel;
}();

exports["default"] = GameModel;
module.exports = exports["default"];

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvTW9kZWwvR2FtZU1vZGVsLmpzIl0sIm5hbWVzIjpbIkdhbWVNb2RlbCIsImNlbGxzIiwiY2VsbEJncyIsImxhc3RQb3MiLCJjYyIsInYyIiwiY2VsbFR5cGVOdW0iLCJjZWxsQ3JlYXRlVHlwZSIsImluaXQiLCJzZXRDZWxsVHlwZU51bSIsImkiLCJHUklEX1dJRFRIIiwiaiIsIkdSSURfSEVJR0hUIiwiQ2VsbE1vZGVsIiwidHlwZSIsImZsYWciLCJnZXRSYW5kb21DZWxsVHlwZSIsInJlc3VsdCIsImNoZWNrUG9pbnQiLCJsZW5ndGgiLCJzZXRYWSIsInNldFN0YXJ0WFkiLCJtb2NrIiwibW9ja0luaXQiLCJDRUxMX1RZUEUiLCJBIiwiQiIsIngiLCJ5IiwiaW5pdFdpdGhEYXRhIiwiZGF0YSIsInJlY3Vyc2l2ZSIsInJvd1Jlc3VsdCIsImNoZWNrV2l0aERpcmVjdGlvbiIsImNvbFJlc3VsdCIsInNhbWVQb2ludHMiLCJuZXdDZWxsU3RhdHVzIiwiQ0VMTF9TVEFUVVMiLCJCSVJEIiwiV1JBUCIsIkxJTkUiLCJDT0xVTU4iLCJzdWJDaGVja1BvaW50cyIsInBvaW50Iiwic3ViUmVzdWx0IiwiZGlyZWN0aW9uIiwicXVldWUiLCJ2aXMiLCJwdXNoIiwiZnJvbnQiLCJjZWxsTW9kZWwiLCJ0bXBYIiwidG1wWSIsInByaW50SW5mbyIsInByaW50U3RyIiwiY29uc29sZSIsImxvZyIsImdldENlbGxzIiwic2VsZWN0Q2VsbCIsInBvcyIsImNoYW5nZU1vZGVscyIsImVmZmVjdHNRdWV1ZSIsImRlbHRhIiwiTWF0aCIsImFicyIsImN1ckNsaWNrQ2VsbCIsImxhc3RDbGlja0NlbGwiLCJleGNoYW5nZUNlbGwiLCJyZXN1bHQxIiwicmVzdWx0MiIsImN1clRpbWUiLCJwdXNoVG9DaGFuZ2VNb2RlbHMiLCJpc0NhbkJvbWIiLCJzdGF0dXMiLCJDT01NT04iLCJtb3ZlVG9BbmRCYWNrIiwibW92ZVRvIiwiQU5JVElNRSIsIlRPVUNIX01PVkUiLCJwcm9jZXNzQ3J1c2giLCJjeWNsZUNvdW50IiwiYm9tYk1vZGVscyIsInBvczEiLCJwb3MyIiwibW9kZWwxIiwibW9kZWwyIiwiYm9tYk1vZGVsIiwibmV3Q2VsbFR5cGUiLCJjcnVzaFBvaW50IiwibW9kZWwiLCJjcnVzaENlbGwiLCJjcmVhdGVOZXdDZWxsIiwicHJvY2Vzc0JvbWIiLCJESUUiLCJkb3duIiwic2V0U3RhdHVzIiwic2V0VmlzaWJsZSIsIm5ld0NoZWNrUG9pbnQiLCJjdXJSb3ciLCJrIiwiY291bnQiLCJpbmRleE9mIiwiY2xlYW5DbWQiLCJjbWQiLCJ0bXBNb2RlbCIsIm51bSIsImNyZWF0ZVR5cGVMaXN0IiwiQ0VMTF9CQVNFTlVNIiwiaW5kZXgiLCJmbG9vciIsInJhbmRvbSIsIm5ld0JvbWJNb2RlbCIsImJvbWJUaW1lIiwiQk9NQl9ERUxBWSIsImZvckVhY2giLCJhZGRSb3dCb21iIiwiYWRkQ29sQm9tYiIsImNydXNoVHlwZSIsIkJPTUJfQklSRF9ERUxBWSIsImFkZENydXNoRWZmZWN0IiwicGxheVRpbWUiLCJzdGVwIiwiYWN0aW9uIiwiYWRkV3JhcEJvbWIiLCJuZWVkU2hha2UiLCJ0b1NoYWtlIiwic2hha2VUaW1lIiwiRElFX1NIQUtFIiwidG9EaWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7Ozs7Ozs7SUFFcUJBO0FBQ25CLHVCQUFjO0FBQ1osU0FBS0MsS0FBTCxHQUFhLElBQWI7QUFDQSxTQUFLQyxPQUFMLEdBQWUsSUFBZjtBQUNBLFNBQUtDLE9BQUwsR0FBZUMsRUFBRSxDQUFDQyxFQUFILENBQU0sQ0FBQyxDQUFQLEVBQVUsQ0FBQyxDQUFYLENBQWY7QUFDQSxTQUFLQyxXQUFMLEdBQW1CLENBQW5CO0FBQ0EsU0FBS0MsY0FBTCxHQUFzQixFQUF0QixDQUxZLENBS2M7QUFDM0I7Ozs7U0FFREMsT0FBQSxjQUFLRixXQUFMLEVBQWtCO0FBQ2hCLFNBQUtMLEtBQUwsR0FBYSxFQUFiO0FBQ0EsU0FB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LEtBQUt2RCxPQUFuQjtBQUNEOztBQUVELFFBQUl3RCxTQUFTLEdBQUdGLFNBQVMsR0FBRy9DLG9CQUFRa0QsU0FBWCxHQUF1QixDQUFoRDtBQUNBdEMsSUFBQUEsS0FBSyxDQUFDdUMsS0FBTixDQUFZLEtBQUsxRCxPQUFMLEdBQWV3RCxTQUEzQjtBQUNBLFNBQUtQLGNBQUwsQ0FBb0IsS0FBS2pELE9BQUwsR0FBZXdELFNBQW5DLEVBQThDM0gsRUFBRSxDQUFDQyxFQUFILENBQU1xRixLQUFLLENBQUM5RCxDQUFaLEVBQWU4RCxLQUFLLENBQUM3RCxDQUFyQixDQUE5QyxFQUF1RTZGLElBQXZFO0FBQ0EsU0FBS3pILEtBQUwsQ0FBVzRCLENBQVgsRUFBY0QsQ0FBZCxJQUFtQixJQUFuQjtBQUNEIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2VsbE1vZGVsIGZyb20gXCIuL0NlbGxNb2RlbFwiO1xuaW1wb3J0IHsgbWVyZ2VQb2ludEFycmF5LCBleGNsdXNpdmVQb2ludCB9IGZyb20gXCIuLi9VdGlscy9Nb2RlbFV0aWxzXCJcbmltcG9ydCB7IENFTExfVFlQRSwgQ0VMTF9CQVNFTlVNLCBDRUxMX1NUQVRVUywgR1JJRF9XSURUSCwgR1JJRF9IRUlHSFQsIEFOSVRJTUUgfSBmcm9tIFwiLi9Db25zdFZhbHVlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVNb2RlbCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2VsbHMgPSBudWxsO1xuICAgIHRoaXMuY2VsbEJncyA9IG51bGw7XG4gICAgdGhpcy5sYXN0UG9zID0gY2MudjIoLTEsIC0xKTtcbiAgICB0aGlzLmNlbGxUeXBlTnVtID0gNTtcbiAgICB0aGlzLmNlbGxDcmVhdGVUeXBlID0gW107IC8vIOWNh+aIkOenjeexu+WPquWcqOi/meS4quaVsOe7hOmHjOmdouafpeaJvlxuICB9XG5cbiAgaW5pdChjZWxsVHlwZU51bSkge1xuICAgIHRoaXMuY2VsbHMgPSBbXTtcbiAgICB0aGlzLnNldENlbGxUeXBlTnVtKGNlbGxUeXBlTnVtIHx8IHRoaXMuY2VsbFR5cGVOdW0pO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IEdSSURfV0lEVEg7IGkrKykge1xuICAgICAgdGhpcy5jZWxsc1tpXSA9IFtdO1xuICAgICAgZm9yICh2YXIgaiA9IDE7IGogPD0gR1JJRF9IRUlHSFQ7IGorKykge1xuICAgICAgICB0aGlzLmNlbGxzW2ldW2pdID0gbmV3IENlbGxNb2RlbCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHRoaXMubW9jaygpO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IEdSSURfV0lEVEg7IGkrKykge1xuICAgICAgZm9yICh2YXIgaiA9IDE7IGogPD0gR1JJRF9IRUlHSFQ7IGorKykge1xuICAgICAgICAvL+W3sue7j+iiq21vY2vmlbDmja7nlJ/miJDkuoZcbiAgICAgICAgaWYgKHRoaXMuY2VsbHNbaV1bal0udHlwZSAhPSBudWxsKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZsYWcgPSB0cnVlO1xuICAgICAgICB3aGlsZSAoZmxhZykge1xuICAgICAgICAgIGZsYWcgPSBmYWxzZTtcblxuICAgICAgICAgIHRoaXMuY2VsbHNbaV1bal0uaW5pdCh0aGlzLmdldFJhbmRvbUNlbGxUeXBlKCkpO1xuICAgICAgICAgIGxldCByZXN1bHQgPSB0aGlzLmNoZWNrUG9pbnQoaiwgaSlbMF07XG4gICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5jZWxsc1tpXVtqXS5zZXRYWShqLCBpKTtcbiAgICAgICAgICB0aGlzLmNlbGxzW2ldW2pdLnNldFN0YXJ0WFkoaiwgaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgfVxuXG4gIG1vY2soKSB7XG4gICAgdGhpcy5tb2NrSW5pdCg1LCAxLCBDRUxMX1RZUEUuQSk7XG4gICAgdGhpcy5tb2NrSW5pdCg1LCAzLCBDRUxMX1RZUEUuQSk7XG4gICAgdGhpcy5tb2NrSW5pdCg0LCAyLCBDRUxMX1RZUEUuQSk7XG4gICAgdGhpcy5tb2NrSW5pdCgzLCAyLCBDRUxMX1RZUEUuQSk7XG4gICAgdGhpcy5tb2NrSW5pdCg1LCAyLCBDRUxMX1RZUEUuQik7XG4gICAgdGhpcy5tb2NrSW5pdCg2LCAyLCBDRUxMX1RZUEUuQik7XG4gICAgdGhpcy5tb2NrSW5pdCg3LCAzLCBDRUxMX1RZUEUuQik7XG4gICAgdGhpcy5tb2NrSW5pdCg4LCAyLCBDRUxMX1RZUEUuQSk7XG4gIH1cbiAgbW9ja0luaXQoeCwgeSwgdHlwZSkge1xuICAgIHRoaXMuY2VsbHNbeF1beV0uaW5pdCh0eXBlKVxuICAgIHRoaXMuY2VsbHNbeF1beV0uc2V0WFkoeSwgeCk7XG4gICAgdGhpcy5jZWxsc1t4XVt5XS5zZXRTdGFydFhZKHksIHgpO1xuICB9XG5cblxuICBpbml0V2l0aERhdGEoZGF0YSkge1xuICAgIC8vIHRvIGRvXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHhcbiAgICogQHBhcmFtIHlcbiAgICogQHBhcmFtIHJlY3Vyc2l2ZSDmmK/lkKbpgJLlvZLmn6Xmib5cbiAgICogQHJldHVybnMgeyhbXXxzdHJpbmd8KilbXX1cbiAgICovXG4gIGNoZWNrUG9pbnQoeCwgeSwgcmVjdXJzaXZlKSB7XG4gICAgbGV0IHJvd1Jlc3VsdCA9IHRoaXMuY2hlY2tXaXRoRGlyZWN0aW9uKHgsIHksIFtjYy52MigxLCAwKSwgY2MudjIoLTEsIDApXSk7XG4gICAgbGV0IGNvbFJlc3VsdCA9IHRoaXMuY2hlY2tXaXRoRGlyZWN0aW9uKHgsIHksIFtjYy52MigwLCAtMSksIGNjLnYyKDAsIDEpXSk7XG4gICAgbGV0IHNhbWVQb2ludHMgPSBbXTtcbiAgICBsZXQgbmV3Q2VsbFN0YXR1cyA9IFwiXCI7XG4gICAgaWYgKHJvd1Jlc3VsdC5sZW5ndGggPj0gNSB8fCBjb2xSZXN1bHQubGVuZ3RoID49IDUpIHtcbiAgICAgIG5ld0NlbGxTdGF0dXMgPSBDRUxMX1NUQVRVUy5CSVJEO1xuICAgIH1cbiAgICBlbHNlIGlmIChyb3dSZXN1bHQubGVuZ3RoID49IDMgJiYgY29sUmVzdWx0Lmxlbmd0aCA+PSAzKSB7XG4gICAgICBuZXdDZWxsU3RhdHVzID0gQ0VMTF9TVEFUVVMuV1JBUDtcbiAgICB9XG4gICAgZWxzZSBpZiAocm93UmVzdWx0Lmxlbmd0aCA+PSA0KSB7XG4gICAgICBuZXdDZWxsU3RhdHVzID0gQ0VMTF9TVEFUVVMuTElORTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29sUmVzdWx0Lmxlbmd0aCA+PSA0KSB7XG4gICAgICBuZXdDZWxsU3RhdHVzID0gQ0VMTF9TVEFUVVMuQ09MVU1OO1xuICAgIH1cbiAgICBpZiAocm93UmVzdWx0Lmxlbmd0aCA+PSAzKSB7XG4gICAgICBzYW1lUG9pbnRzID0gcm93UmVzdWx0O1xuICAgIH1cbiAgICBpZiAoY29sUmVzdWx0Lmxlbmd0aCA+PSAzKSB7XG4gICAgICBzYW1lUG9pbnRzID0gbWVyZ2VQb2ludEFycmF5KHNhbWVQb2ludHMsIGNvbFJlc3VsdCk7XG4gICAgfVxuICAgIGxldCByZXN1bHQgPSBbc2FtZVBvaW50cywgbmV3Q2VsbFN0YXR1cywgdGhpcy5jZWxsc1t5XVt4XS50eXBlLCBjYy52Mih4LCB5KV07XG4gICAgLy8g5qOA5p+l5LiA5LiL5raI6Zmk55qE5YW25LuW6IqC54K577yMIOiDveS4jeiDveeUn+aIkOabtOWkp+iMg+WbtOeahOa2iOmZpFxuICAgIGlmIChyZWN1cnNpdmUgJiYgcmVzdWx0Lmxlbmd0aCA+PSAzKSB7XG4gICAgICBsZXQgc3ViQ2hlY2tQb2ludHMgPSBleGNsdXNpdmVQb2ludChzYW1lUG9pbnRzLCBjYy52Mih4LCB5KSk7XG4gICAgICBmb3IgKGxldCBwb2ludCBvZiBzdWJDaGVja1BvaW50cykge1xuICAgICAgICBsZXQgc3ViUmVzdWx0ID0gdGhpcy5jaGVja1BvaW50KHBvaW50LngsIHBvaW50LnksIGZhbHNlKTtcbiAgICAgICAgaWYgKHN1YlJlc3VsdFsxXSA+IHJlc3VsdFsxXSB8fCAoc3ViUmVzdWx0WzFdID09PSByZXN1bHRbMV0gJiYgc3ViUmVzdWx0WzBdLmxlbmd0aCA+IHJlc3VsdFswXS5sZW5ndGgpKSB7XG4gICAgICAgICAgcmVzdWx0ID0gc3ViUmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBjaGVja1dpdGhEaXJlY3Rpb24oeCwgeSwgZGlyZWN0aW9uKSB7XG4gICAgbGV0IHF1ZXVlID0gW107XG4gICAgbGV0IHZpcyA9IFtdO1xuICAgIHZpc1t4ICsgeSAqIDldID0gdHJ1ZTtcbiAgICBxdWV1ZS5wdXNoKGNjLnYyKHgsIHkpKTtcbiAgICBsZXQgZnJvbnQgPSAwO1xuICAgIHdoaWxlIChmcm9udCA8IHF1ZXVlLmxlbmd0aCkge1xuICAgICAgLy9sZXQgZGlyZWN0aW9uID0gW2NjLnYyKDAsIC0xKSwgY2MudjIoMCwgMSksIGNjLnYyKDEsIDApLCBjYy52MigtMSwgMCldO1xuICAgICAgbGV0IHBvaW50ID0gcXVldWVbZnJvbnRdO1xuICAgICAgbGV0IGNlbGxNb2RlbCA9IHRoaXMuY2VsbHNbcG9pbnQueV1bcG9pbnQueF07XG4gICAgICBmcm9udCsrO1xuICAgICAgaWYgKCFjZWxsTW9kZWwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpcmVjdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgdG1wWCA9IHBvaW50LnggKyBkaXJlY3Rpb25baV0ueDtcbiAgICAgICAgbGV0IHRtcFkgPSBwb2ludC55ICsgZGlyZWN0aW9uW2ldLnk7XG4gICAgICAgIGlmICh0bXBYIDwgMSB8fCB0bXBYID4gOVxuICAgICAgICAgIHx8IHRtcFkgPCAxIHx8IHRtcFkgPiA5XG4gICAgICAgICAgfHwgdmlzW3RtcFggKyB0bXBZICogOV1cbiAgICAgICAgICB8fCAhdGhpcy5jZWxsc1t0bXBZXVt0bXBYXSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjZWxsTW9kZWwudHlwZSA9PT0gdGhpcy5jZWxsc1t0bXBZXVt0bXBYXS50eXBlKSB7XG4gICAgICAgICAgdmlzW3RtcFggKyB0bXBZICogOV0gPSB0cnVlO1xuICAgICAgICAgIHF1ZXVlLnB1c2goY2MudjIodG1wWCwgdG1wWSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBxdWV1ZTtcbiAgfVxuXG4gIHByaW50SW5mbygpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSA5OyBpKyspIHtcbiAgICAgIHZhciBwcmludFN0ciA9IFwiXCI7XG4gICAgICBmb3IgKHZhciBqID0gMTsgaiA8PSA5OyBqKyspIHtcbiAgICAgICAgcHJpbnRTdHIgKz0gdGhpcy5jZWxsc1tpXVtqXS50eXBlICsgXCIgXCI7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhwcmludFN0cik7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q2VsbHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2VsbHM7XG4gIH1cbiAgLy8gY29udHJvbGxlcuiwg+eUqOeahOS4u+imgeWFpeWPo1xuICAvLyDngrnlh7vmn5DkuKrmoLzlrZBcbiAgc2VsZWN0Q2VsbChwb3MpIHtcbiAgICB0aGlzLmNoYW5nZU1vZGVscyA9IFtdOy8vIOWPkeeUn+aUueWPmOeahG1vZGVs77yM5bCG5L2c5Li66L+U5Zue5YC877yM57uZdmlld+aSreWKqOS9nFxuICAgIHRoaXMuZWZmZWN0c1F1ZXVlID0gW107IC8vIOWKqOeJqea2iOWkse+8jOeIhueCuOetieeJueaViFxuICAgIHZhciBsYXN0UG9zID0gdGhpcy5sYXN0UG9zO1xuICAgIHZhciBkZWx0YSA9IE1hdGguYWJzKHBvcy54IC0gbGFzdFBvcy54KSArIE1hdGguYWJzKHBvcy55IC0gbGFzdFBvcy55KTtcbiAgICBpZiAoZGVsdGEgIT0gMSkgeyAvL+mdnuebuOmCu+agvOWtkO+8jCDnm7TmjqXov5Tlm55cbiAgICAgIHRoaXMubGFzdFBvcyA9IHBvcztcbiAgICAgIHJldHVybiBbW10sIFtdXTtcbiAgICB9XG4gICAgbGV0IGN1ckNsaWNrQ2VsbCA9IHRoaXMuY2VsbHNbcG9zLnldW3Bvcy54XTsgLy/lvZPliY3ngrnlh7vnmoTmoLzlrZBcbiAgICBsZXQgbGFzdENsaWNrQ2VsbCA9IHRoaXMuY2VsbHNbbGFzdFBvcy55XVtsYXN0UG9zLnhdOyAvLyDkuIrkuIDmrKHngrnlh7vnmoTmoLzlvI9cbiAgICB0aGlzLmV4Y2hhbmdlQ2VsbChsYXN0UG9zLCBwb3MpO1xuICAgIHZhciByZXN1bHQxID0gdGhpcy5jaGVja1BvaW50KHBvcy54LCBwb3MueSlbMF07XG4gICAgdmFyIHJlc3VsdDIgPSB0aGlzLmNoZWNrUG9pbnQobGFzdFBvcy54LCBsYXN0UG9zLnkpWzBdO1xuICAgIHRoaXMuY3VyVGltZSA9IDA7IC8vIOWKqOeUu+aSreaUvueahOW9k+WJjeaXtumXtFxuICAgIHRoaXMucHVzaFRvQ2hhbmdlTW9kZWxzKGN1ckNsaWNrQ2VsbCk7XG4gICAgdGhpcy5wdXNoVG9DaGFuZ2VNb2RlbHMobGFzdENsaWNrQ2VsbCk7XG4gICAgbGV0IGlzQ2FuQm9tYiA9IChjdXJDbGlja0NlbGwuc3RhdHVzICE9IENFTExfU1RBVFVTLkNPTU1PTiAmJiAvLyDliKTmlq3kuKTkuKrmmK/lkKbmmK/nibnmrornmoTliqjnialcbiAgICAgIGxhc3RDbGlja0NlbGwuc3RhdHVzICE9IENFTExfU1RBVFVTLkNPTU1PTikgfHxcbiAgICAgIGN1ckNsaWNrQ2VsbC5zdGF0dXMgPT0gQ0VMTF9TVEFUVVMuQklSRCB8fFxuICAgICAgbGFzdENsaWNrQ2VsbC5zdGF0dXMgPT0gQ0VMTF9TVEFUVVMuQklSRDtcbiAgICBpZiAocmVzdWx0MS5sZW5ndGggPCAzICYmIHJlc3VsdDIubGVuZ3RoIDwgMyAmJiAhaXNDYW5Cb21iKSB7Ly/kuI3kvJrlj5HnlJ/mtojpmaTnmoTmg4XlhrVcbiAgICAgIHRoaXMuZXhjaGFuZ2VDZWxsKGxhc3RQb3MsIHBvcyk7XG4gICAgICBjdXJDbGlja0NlbGwubW92ZVRvQW5kQmFjayhsYXN0UG9zKTtcbiAgICAgIGxhc3RDbGlja0NlbGwubW92ZVRvQW5kQmFjayhwb3MpO1xuICAgICAgdGhpcy5sYXN0UG9zID0gY2MudjIoLTEsIC0xKTtcbiAgICAgIHJldHVybiBbdGhpcy5jaGFuZ2VNb2RlbHNdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMubGFzdFBvcyA9IGNjLnYyKC0xLCAtMSk7XG4gICAgICBjdXJDbGlja0NlbGwubW92ZVRvKGxhc3RQb3MsIHRoaXMuY3VyVGltZSk7XG4gICAgICBsYXN0Q2xpY2tDZWxsLm1vdmVUbyhwb3MsIHRoaXMuY3VyVGltZSk7XG4gICAgICB2YXIgY2hlY2tQb2ludCA9IFtwb3MsIGxhc3RQb3NdO1xuICAgICAgdGhpcy5jdXJUaW1lICs9IEFOSVRJTUUuVE9VQ0hfTU9WRTtcbiAgICAgIHRoaXMucHJvY2Vzc0NydXNoKGNoZWNrUG9pbnQpO1xuICAgICAgcmV0dXJuIFt0aGlzLmNoYW5nZU1vZGVscywgdGhpcy5lZmZlY3RzUXVldWVdO1xuICAgIH1cbiAgfVxuICAvLyDmtojpmaRcbiAgcHJvY2Vzc0NydXNoKGNoZWNrUG9pbnQpIHtcbiAgICBsZXQgY3ljbGVDb3VudCA9IDA7XG4gICAgd2hpbGUgKGNoZWNrUG9pbnQubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IGJvbWJNb2RlbHMgPSBbXTtcbiAgICAgIGlmIChjeWNsZUNvdW50ID09IDAgJiYgY2hlY2tQb2ludC5sZW5ndGggPT0gMikgeyAvL+eJueauiua2iOmZpFxuICAgICAgICBsZXQgcG9zMSA9IGNoZWNrUG9pbnRbMF07XG4gICAgICAgIGxldCBwb3MyID0gY2hlY2tQb2ludFsxXTtcbiAgICAgICAgbGV0IG1vZGVsMSA9IHRoaXMuY2VsbHNbcG9zMS55XVtwb3MxLnhdO1xuICAgICAgICBsZXQgbW9kZWwyID0gdGhpcy5jZWxsc1twb3MyLnldW3BvczIueF07XG4gICAgICAgIGlmIChtb2RlbDEuc3RhdHVzID09IENFTExfU1RBVFVTLkJJUkQgfHwgbW9kZWwyLnN0YXR1cyA9PSBDRUxMX1NUQVRVUy5CSVJEKSB7XG4gICAgICAgICAgbGV0IGJvbWJNb2RlbCA9IG51bGw7XG4gICAgICAgICAgaWYgKG1vZGVsMS5zdGF0dXMgPT0gQ0VMTF9TVEFUVVMuQklSRCkge1xuICAgICAgICAgICAgbW9kZWwxLnR5cGUgPSBtb2RlbDIudHlwZTtcbiAgICAgICAgICAgIGJvbWJNb2RlbHMucHVzaChtb2RlbDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1vZGVsMi50eXBlID0gbW9kZWwxLnR5cGU7XG4gICAgICAgICAgICBib21iTW9kZWxzLnB1c2gobW9kZWwyKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yICh2YXIgaSBpbiBjaGVja1BvaW50KSB7XG4gICAgICAgIHZhciBwb3MgPSBjaGVja1BvaW50W2ldO1xuICAgICAgICBpZiAoIXRoaXMuY2VsbHNbcG9zLnldW3Bvcy54XSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBbcmVzdWx0LCBuZXdDZWxsU3RhdHVzLCBuZXdDZWxsVHlwZSwgY3J1c2hQb2ludF0gPSB0aGlzLmNoZWNrUG9pbnQocG9zLngsIHBvcy55LCB0cnVlKTtcblxuICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA8IDMpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBqIGluIHJlc3VsdCkge1xuICAgICAgICAgIHZhciBtb2RlbCA9IHRoaXMuY2VsbHNbcmVzdWx0W2pdLnldW3Jlc3VsdFtqXS54XTtcbiAgICAgICAgICB0aGlzLmNydXNoQ2VsbChyZXN1bHRbal0ueCwgcmVzdWx0W2pdLnksIGZhbHNlLCBjeWNsZUNvdW50KTtcbiAgICAgICAgICBpZiAobW9kZWwuc3RhdHVzICE9IENFTExfU1RBVFVTLkNPTU1PTikge1xuICAgICAgICAgICAgYm9tYk1vZGVscy5wdXNoKG1vZGVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jcmVhdGVOZXdDZWxsKGNydXNoUG9pbnQsIG5ld0NlbGxTdGF0dXMsIG5ld0NlbGxUeXBlKTtcblxuICAgICAgfVxuICAgICAgdGhpcy5wcm9jZXNzQm9tYihib21iTW9kZWxzLCBjeWNsZUNvdW50KTtcbiAgICAgIHRoaXMuY3VyVGltZSArPSBBTklUSU1FLkRJRTtcbiAgICAgIGNoZWNrUG9pbnQgPSB0aGlzLmRvd24oKTtcbiAgICAgIGN5Y2xlQ291bnQrKztcbiAgICB9XG4gIH1cblxuICAvL+eUn+aIkOaWsGNlbGxcbiAgY3JlYXRlTmV3Q2VsbChwb3MsIHN0YXR1cywgdHlwZSkge1xuICAgIGlmIChzdGF0dXMgPT0gXCJcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoc3RhdHVzID09IENFTExfU1RBVFVTLkJJUkQpIHtcbiAgICAgIHR5cGUgPSBDRUxMX1RZUEUuQklSRFxuICAgIH1cbiAgICBsZXQgbW9kZWwgPSBuZXcgQ2VsbE1vZGVsKCk7XG4gICAgdGhpcy5jZWxsc1twb3MueV1bcG9zLnhdID0gbW9kZWxcbiAgICBtb2RlbC5pbml0KHR5cGUpO1xuICAgIG1vZGVsLnNldFN0YXJ0WFkocG9zLngsIHBvcy55KTtcbiAgICBtb2RlbC5zZXRYWShwb3MueCwgcG9zLnkpO1xuICAgIG1vZGVsLnNldFN0YXR1cyhzdGF0dXMpO1xuICAgIG1vZGVsLnNldFZpc2libGUoMCwgZmFsc2UpO1xuICAgIG1vZGVsLnNldFZpc2libGUodGhpcy5jdXJUaW1lLCB0cnVlKTtcbiAgICB0aGlzLmNoYW5nZU1vZGVscy5wdXNoKG1vZGVsKTtcbiAgfVxuICAvLyDkuIvokL1cbiAgZG93bigpIHtcbiAgICBsZXQgbmV3Q2hlY2tQb2ludCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IEdSSURfV0lEVEg7IGkrKykge1xuICAgICAgZm9yICh2YXIgaiA9IDE7IGogPD0gR1JJRF9IRUlHSFQ7IGorKykge1xuICAgICAgICBpZiAodGhpcy5jZWxsc1tpXVtqXSA9PSBudWxsKSB7XG4gICAgICAgICAgdmFyIGN1clJvdyA9IGk7XG4gICAgICAgICAgZm9yICh2YXIgayA9IGN1clJvdzsgayA8PSBHUklEX0hFSUdIVDsgaysrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jZWxsc1trXVtqXSkge1xuICAgICAgICAgICAgICB0aGlzLnB1c2hUb0NoYW5nZU1vZGVscyh0aGlzLmNlbGxzW2tdW2pdKTtcbiAgICAgICAgICAgICAgbmV3Q2hlY2tQb2ludC5wdXNoKHRoaXMuY2VsbHNba11bal0pO1xuICAgICAgICAgICAgICB0aGlzLmNlbGxzW2N1clJvd11bal0gPSB0aGlzLmNlbGxzW2tdW2pdO1xuICAgICAgICAgICAgICB0aGlzLmNlbGxzW2tdW2pdID0gbnVsbDtcbiAgICAgICAgICAgICAgdGhpcy5jZWxsc1tjdXJSb3ddW2pdLnNldFhZKGosIGN1clJvdyk7XG4gICAgICAgICAgICAgIHRoaXMuY2VsbHNbY3VyUm93XVtqXS5tb3ZlVG8oY2MudjIoaiwgY3VyUm93KSwgdGhpcy5jdXJUaW1lKTtcbiAgICAgICAgICAgICAgY3VyUm93Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBjb3VudCA9IDE7XG4gICAgICAgICAgZm9yICh2YXIgayA9IGN1clJvdzsgayA8PSBHUklEX0hFSUdIVDsgaysrKSB7XG4gICAgICAgICAgICB0aGlzLmNlbGxzW2tdW2pdID0gbmV3IENlbGxNb2RlbCgpO1xuICAgICAgICAgICAgdGhpcy5jZWxsc1trXVtqXS5pbml0KHRoaXMuZ2V0UmFuZG9tQ2VsbFR5cGUoKSk7XG4gICAgICAgICAgICB0aGlzLmNlbGxzW2tdW2pdLnNldFN0YXJ0WFkoaiwgY291bnQgKyBHUklEX0hFSUdIVCk7XG4gICAgICAgICAgICB0aGlzLmNlbGxzW2tdW2pdLnNldFhZKGosIGNvdW50ICsgR1JJRF9IRUlHSFQpO1xuICAgICAgICAgICAgdGhpcy5jZWxsc1trXVtqXS5tb3ZlVG8oY2MudjIoaiwgayksIHRoaXMuY3VyVGltZSk7XG4gICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VNb2RlbHMucHVzaCh0aGlzLmNlbGxzW2tdW2pdKTtcbiAgICAgICAgICAgIG5ld0NoZWNrUG9pbnQucHVzaCh0aGlzLmNlbGxzW2tdW2pdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmN1clRpbWUgKz0gQU5JVElNRS5UT1VDSF9NT1ZFICsgMC4zXG4gICAgcmV0dXJuIG5ld0NoZWNrUG9pbnQ7XG4gIH1cblxuICBwdXNoVG9DaGFuZ2VNb2RlbHMobW9kZWwpIHtcbiAgICBpZiAodGhpcy5jaGFuZ2VNb2RlbHMuaW5kZXhPZihtb2RlbCkgIT0gLTEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5jaGFuZ2VNb2RlbHMucHVzaChtb2RlbCk7XG4gIH1cblxuICBjbGVhbkNtZCgpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBHUklEX1dJRFRIOyBpKyspIHtcbiAgICAgIGZvciAodmFyIGogPSAxOyBqIDw9IEdSSURfSEVJR0hUOyBqKyspIHtcbiAgICAgICAgaWYgKHRoaXMuY2VsbHNbaV1bal0pIHtcbiAgICAgICAgICB0aGlzLmNlbGxzW2ldW2pdLmNtZCA9IFtdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZXhjaGFuZ2VDZWxsKHBvczEsIHBvczIpIHtcbiAgICB2YXIgdG1wTW9kZWwgPSB0aGlzLmNlbGxzW3BvczEueV1bcG9zMS54XTtcbiAgICB0aGlzLmNlbGxzW3BvczEueV1bcG9zMS54XSA9IHRoaXMuY2VsbHNbcG9zMi55XVtwb3MyLnhdO1xuICAgIHRoaXMuY2VsbHNbcG9zMS55XVtwb3MxLnhdLnggPSBwb3MxLng7XG4gICAgdGhpcy5jZWxsc1twb3MxLnldW3BvczEueF0ueSA9IHBvczEueTtcbiAgICB0aGlzLmNlbGxzW3BvczIueV1bcG9zMi54XSA9IHRtcE1vZGVsO1xuICAgIHRoaXMuY2VsbHNbcG9zMi55XVtwb3MyLnhdLnggPSBwb3MyLng7XG4gICAgdGhpcy5jZWxsc1twb3MyLnldW3BvczIueF0ueSA9IHBvczIueTtcbiAgfVxuICAvLyDorr7nva7np43nsbtcbiAgLy8gVG9kbyDmlLnmiJDkubHluo/nrpfms5VcbiAgc2V0Q2VsbFR5cGVOdW0obnVtKSB7XG4gICAgY29uc29sZS5sb2coXCJudW0gPSBcIiwgbnVtKTtcbiAgICB0aGlzLmNlbGxUeXBlTnVtID0gbnVtO1xuICAgIHRoaXMuY2VsbENyZWF0ZVR5cGUgPSBbXTtcbiAgICBsZXQgY3JlYXRlVHlwZUxpc3QgPSB0aGlzLmNlbGxDcmVhdGVUeXBlO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IENFTExfQkFTRU5VTTsgaSsrKSB7XG4gICAgICBjcmVhdGVUeXBlTGlzdC5wdXNoKGkpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNyZWF0ZVR5cGVMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoQ0VMTF9CQVNFTlVNIC0gaSkpICsgaTtcbiAgICAgIGNyZWF0ZVR5cGVMaXN0W2ldLCBjcmVhdGVUeXBlTGlzdFtpbmRleF0gPSBjcmVhdGVUeXBlTGlzdFtpbmRleF0sIGNyZWF0ZVR5cGVMaXN0W2ldXG4gICAgfVxuICB9XG4gIC8vIOmaj+imgeeUn+aIkOS4gOS4quexu+Wei1xuICBnZXRSYW5kb21DZWxsVHlwZSgpIHtcbiAgICB2YXIgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmNlbGxUeXBlTnVtKTtcbiAgICByZXR1cm4gdGhpcy5jZWxsQ3JlYXRlVHlwZVtpbmRleF07XG4gIH1cbiAgLy8gVE9ETyBib21iTW9kZWxz5Y676YeNXG4gIHByb2Nlc3NCb21iKGJvbWJNb2RlbHMsIGN5Y2xlQ291bnQpIHtcbiAgICB3aGlsZSAoYm9tYk1vZGVscy5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgbmV3Qm9tYk1vZGVsID0gW107XG4gICAgICBsZXQgYm9tYlRpbWUgPSBBTklUSU1FLkJPTUJfREVMQVk7XG4gICAgICBib21iTW9kZWxzLmZvckVhY2goZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgICAgIGlmIChtb2RlbC5zdGF0dXMgPT0gQ0VMTF9TVEFUVVMuTElORSkge1xuICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IEdSSURfV0lEVEg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2VsbHNbbW9kZWwueV1baV0pIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuY2VsbHNbbW9kZWwueV1baV0uc3RhdHVzICE9IENFTExfU1RBVFVTLkNPTU1PTikge1xuICAgICAgICAgICAgICAgIG5ld0JvbWJNb2RlbC5wdXNoKHRoaXMuY2VsbHNbbW9kZWwueV1baV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMuY3J1c2hDZWxsKGksIG1vZGVsLnksIGZhbHNlLCBjeWNsZUNvdW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5hZGRSb3dCb21iKHRoaXMuY3VyVGltZSwgY2MudjIobW9kZWwueCwgbW9kZWwueSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1vZGVsLnN0YXR1cyA9PSBDRUxMX1NUQVRVUy5DT0xVTU4pIHtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBHUklEX0hFSUdIVDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jZWxsc1tpXVttb2RlbC54XSkge1xuICAgICAgICAgICAgICBpZiAodGhpcy5jZWxsc1tpXVttb2RlbC54XS5zdGF0dXMgIT0gQ0VMTF9TVEFUVVMuQ09NTU9OKSB7XG4gICAgICAgICAgICAgICAgbmV3Qm9tYk1vZGVsLnB1c2godGhpcy5jZWxsc1tpXVttb2RlbC54XSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhpcy5jcnVzaENlbGwobW9kZWwueCwgaSwgZmFsc2UsIGN5Y2xlQ291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmFkZENvbEJvbWIodGhpcy5jdXJUaW1lLCBjYy52Mihtb2RlbC54LCBtb2RlbC55KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobW9kZWwuc3RhdHVzID09IENFTExfU1RBVFVTLldSQVApIHtcbiAgICAgICAgICBsZXQgeCA9IG1vZGVsLng7XG4gICAgICAgICAgbGV0IHkgPSBtb2RlbC55O1xuICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IEdSSURfSEVJR0hUOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDw9IEdSSURfV0lEVEg7IGorKykge1xuICAgICAgICAgICAgICBsZXQgZGVsdGEgPSBNYXRoLmFicyh4IC0gaikgKyBNYXRoLmFicyh5IC0gaSk7XG4gICAgICAgICAgICAgIGlmICh0aGlzLmNlbGxzW2ldW2pdICYmIGRlbHRhIDw9IDIpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jZWxsc1tpXVtqXS5zdGF0dXMgIT0gQ0VMTF9TVEFUVVMuQ09NTU9OKSB7XG4gICAgICAgICAgICAgICAgICBuZXdCb21iTW9kZWwucHVzaCh0aGlzLmNlbGxzW2ldW2pdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jcnVzaENlbGwoaiwgaSwgZmFsc2UsIGN5Y2xlQ291bnQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1vZGVsLnN0YXR1cyA9PSBDRUxMX1NUQVRVUy5CSVJEKSB7XG4gICAgICAgICAgbGV0IGNydXNoVHlwZSA9IG1vZGVsLnR5cGVcbiAgICAgICAgICBpZiAoYm9tYlRpbWUgPCBBTklUSU1FLkJPTUJfQklSRF9ERUxBWSkge1xuICAgICAgICAgICAgYm9tYlRpbWUgPSBBTklUSU1FLkJPTUJfQklSRF9ERUxBWTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNydXNoVHlwZSA9PSBDRUxMX1RZUEUuQklSRCkge1xuICAgICAgICAgICAgY3J1c2hUeXBlID0gdGhpcy5nZXRSYW5kb21DZWxsVHlwZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBHUklEX0hFSUdIVDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8PSBHUklEX1dJRFRIOyBqKyspIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuY2VsbHNbaV1bal0gJiYgdGhpcy5jZWxsc1tpXVtqXS50eXBlID09IGNydXNoVHlwZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNlbGxzW2ldW2pdLnN0YXR1cyAhPSBDRUxMX1NUQVRVUy5DT01NT04pIHtcbiAgICAgICAgICAgICAgICAgIG5ld0JvbWJNb2RlbC5wdXNoKHRoaXMuY2VsbHNbaV1bal0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNydXNoQ2VsbChqLCBpLCB0cnVlLCBjeWNsZUNvdW50KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvL3RoaXMuY3J1c2hDZWxsKG1vZGVsLngsIG1vZGVsLnkpO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICAgIGlmIChib21iTW9kZWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5jdXJUaW1lICs9IGJvbWJUaW1lO1xuICAgICAgfVxuICAgICAgYm9tYk1vZGVscyA9IG5ld0JvbWJNb2RlbDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFxuICAgKiBAcGFyYW0ge+W8gOWni+aSreaUvueahOaXtumXtH0gcGxheVRpbWUgXG4gICAqIEBwYXJhbSB7KmNlbGzkvY3nva59IHBvcyBcbiAgICogQHBhcmFtIHsq56ys5Yeg5qyh5raI6Zmk77yM55So5LqO5pKt5pS+6Z+z5pWIfSBzdGVwIFxuICAgKi9cbiAgYWRkQ3J1c2hFZmZlY3QocGxheVRpbWUsIHBvcywgc3RlcCkge1xuICAgIHRoaXMuZWZmZWN0c1F1ZXVlLnB1c2goe1xuICAgICAgcGxheVRpbWUsXG4gICAgICBwb3MsXG4gICAgICBhY3Rpb246IFwiY3J1c2hcIixcbiAgICAgIHN0ZXBcbiAgICB9KTtcbiAgfVxuXG4gIGFkZFJvd0JvbWIocGxheVRpbWUsIHBvcykge1xuICAgIHRoaXMuZWZmZWN0c1F1ZXVlLnB1c2goe1xuICAgICAgcGxheVRpbWUsXG4gICAgICBwb3MsXG4gICAgICBhY3Rpb246IFwicm93Qm9tYlwiXG4gICAgfSk7XG4gIH1cblxuICBhZGRDb2xCb21iKHBsYXlUaW1lLCBwb3MpIHtcbiAgICB0aGlzLmVmZmVjdHNRdWV1ZS5wdXNoKHtcbiAgICAgIHBsYXlUaW1lLFxuICAgICAgcG9zLFxuICAgICAgYWN0aW9uOiBcImNvbEJvbWJcIlxuICAgIH0pO1xuICB9XG5cbiAgYWRkV3JhcEJvbWIocGxheVRpbWUsIHBvcykge1xuICAgIC8vIFRPRE9cbiAgfVxuICAvLyBjZWxs5raI6Zmk6YC76L6RXG4gIGNydXNoQ2VsbCh4LCB5LCBuZWVkU2hha2UsIHN0ZXApIHtcbiAgICBsZXQgbW9kZWwgPSB0aGlzLmNlbGxzW3ldW3hdO1xuICAgIHRoaXMucHVzaFRvQ2hhbmdlTW9kZWxzKG1vZGVsKTtcbiAgICBpZiAobmVlZFNoYWtlKSB7XG4gICAgICBtb2RlbC50b1NoYWtlKHRoaXMuY3VyVGltZSlcbiAgICB9XG5cbiAgICBsZXQgc2hha2VUaW1lID0gbmVlZFNoYWtlID8gQU5JVElNRS5ESUVfU0hBS0UgOiAwO1xuICAgIG1vZGVsLnRvRGllKHRoaXMuY3VyVGltZSArIHNoYWtlVGltZSk7XG4gICAgdGhpcy5hZGRDcnVzaEVmZmVjdCh0aGlzLmN1clRpbWUgKyBzaGFrZVRpbWUsIGNjLnYyKG1vZGVsLngsIG1vZGVsLnkpLCBzdGVwKTtcbiAgICB0aGlzLmNlbGxzW3ldW3hdID0gbnVsbDtcbiAgfVxuXG59XG5cbiJdfQ==
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Utils/AudioUtils.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'fe151y+R2lFvas76dyah2Uf', 'AudioUtils');
// Script/Utils/AudioUtils.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    swap: {
      type: cc.AudioClip,
      "default": null
    },
    click: {
      type: cc.AudioClip,
      "default": null
    },
    eliminate: {
      type: [cc.AudioClip],
      "default": []
    },
    continuousMatch: {
      type: [cc.AudioClip],
      "default": []
    }
  },
  // LIFE-CYCLE CALLBACKS:
  onLoad: function onLoad() {},
  start: function start() {},
  playClick: function playClick() {
    cc.audioEngine.play(this.click, false, 1);
  },
  playSwap: function playSwap() {
    cc.audioEngine.play(this.swap, false, 1);
  },
  playEliminate: function playEliminate(step) {
    step = Math.min(this.eliminate.length - 1, step);
    cc.audioEngine.play(this.eliminate[step], false, 1);
  },
  playContinuousMatch: function playContinuousMatch(step) {
    console.log("step = ", step);
    step = Math.min(step, 11);

    if (step < 2) {
      return;
    }

    cc.audioEngine.play(this.continuousMatch[Math.floor(step / 2) - 1], false, 1);
  } // update (dt) {},

});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvVXRpbHMvQXVkaW9VdGlscy5qcyJdLCJuYW1lcyI6WyJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsInN3YXAiLCJ0eXBlIiwiQXVkaW9DbGlwIiwiY2xpY2siLCJlbGltaW5hdGUiLCJjb250aW51b3VzTWF0Y2giLCJvbkxvYWQiLCJzdGFydCIsInBsYXlDbGljayIsImF1ZGlvRW5naW5lIiwicGxheSIsInBsYXlTd2FwIiwicGxheUVsaW1pbmF0ZSIsInN0ZXAiLCJNYXRoIiwibWluIiwibGVuZ3RoIiwicGxheUNvbnRpbnVvdXNNYXRjaCIsImNvbnNvbGUiLCJsb2ciLCJmbG9vciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQUEsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1JDLElBQUFBLElBQUksRUFBRTtBQUNGQyxNQUFBQSxJQUFJLEVBQUVMLEVBQUUsQ0FBQ00sU0FEUDtBQUVGLGlCQUFTO0FBRlAsS0FERTtBQUtSQyxJQUFBQSxLQUFLLEVBQUU7QUFDSEYsTUFBQUEsSUFBSSxFQUFFTCxFQUFFLENBQUNNLFNBRE47QUFFSCxpQkFBUztBQUZOLEtBTEM7QUFTUkUsSUFBQUEsU0FBUyxFQUFDO0FBQ05ILE1BQUFBLElBQUksRUFBRSxDQUFDTCxFQUFFLENBQUNNLFNBQUosQ0FEQTtBQUVOLGlCQUFTO0FBRkgsS0FURjtBQWFSRyxJQUFBQSxlQUFlLEVBQUM7QUFDWkosTUFBQUEsSUFBSSxFQUFFLENBQUNMLEVBQUUsQ0FBQ00sU0FBSixDQURNO0FBRVosaUJBQVM7QUFGRztBQWJSLEdBSFA7QUFzQkw7QUFFQUksRUFBQUEsTUF4Qkssb0JBd0JLLENBRVQsQ0ExQkk7QUE0QkxDLEVBQUFBLEtBNUJLLG1CQTRCSSxDQUVSLENBOUJJO0FBK0JMQyxFQUFBQSxTQUFTLEVBQUUscUJBQVU7QUFDakJaLElBQUFBLEVBQUUsQ0FBQ2EsV0FBSCxDQUFlQyxJQUFmLENBQW9CLEtBQUtQLEtBQXpCLEVBQWdDLEtBQWhDLEVBQXVDLENBQXZDO0FBQ0gsR0FqQ0k7QUFrQ0xRLEVBQUFBLFFBQVEsRUFBRSxvQkFBVTtBQUNoQmYsSUFBQUEsRUFBRSxDQUFDYSxXQUFILENBQWVDLElBQWYsQ0FBb0IsS0FBS1YsSUFBekIsRUFBK0IsS0FBL0IsRUFBc0MsQ0FBdEM7QUFDSCxHQXBDSTtBQXFDTFksRUFBQUEsYUFBYSxFQUFFLHVCQUFTQyxJQUFULEVBQWM7QUFDekJBLElBQUFBLElBQUksR0FBR0MsSUFBSSxDQUFDQyxHQUFMLENBQVMsS0FBS1gsU0FBTCxDQUFlWSxNQUFmLEdBQXdCLENBQWpDLEVBQW9DSCxJQUFwQyxDQUFQO0FBQ0FqQixJQUFBQSxFQUFFLENBQUNhLFdBQUgsQ0FBZUMsSUFBZixDQUFvQixLQUFLTixTQUFMLENBQWVTLElBQWYsQ0FBcEIsRUFBMEMsS0FBMUMsRUFBaUQsQ0FBakQ7QUFDSCxHQXhDSTtBQXlDTEksRUFBQUEsbUJBQW1CLEVBQUUsNkJBQVNKLElBQVQsRUFBYztBQUMvQkssSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksU0FBWixFQUF1Qk4sSUFBdkI7QUFDQUEsSUFBQUEsSUFBSSxHQUFHQyxJQUFJLENBQUNDLEdBQUwsQ0FBU0YsSUFBVCxFQUFlLEVBQWYsQ0FBUDs7QUFDQSxRQUFHQSxJQUFJLEdBQUcsQ0FBVixFQUFZO0FBQ1I7QUFDSDs7QUFDRGpCLElBQUFBLEVBQUUsQ0FBQ2EsV0FBSCxDQUFlQyxJQUFmLENBQW9CLEtBQUtMLGVBQUwsQ0FBcUJTLElBQUksQ0FBQ00sS0FBTCxDQUFXUCxJQUFJLEdBQUMsQ0FBaEIsSUFBcUIsQ0FBMUMsQ0FBcEIsRUFBa0UsS0FBbEUsRUFBeUUsQ0FBekU7QUFDSCxHQWhESSxDQWtETDs7QUFsREssQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICBzd2FwOiB7XG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXAsXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIGNsaWNrOiB7XG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXAsXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIGVsaW1pbmF0ZTp7XG4gICAgICAgICAgICB0eXBlOiBbY2MuQXVkaW9DbGlwXSxcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICB9LFxuICAgICAgICBjb250aW51b3VzTWF0Y2g6e1xuICAgICAgICAgICAgdHlwZTogW2NjLkF1ZGlvQ2xpcF0sXG4gICAgICAgICAgICBkZWZhdWx0OiBbXVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8vIExJRkUtQ1lDTEUgQ0FMTEJBQ0tTOlxuXG4gICAgb25Mb2FkICgpIHtcbiAgICAgIFxuICAgIH0sXG5cbiAgICBzdGFydCAoKSB7XG5cbiAgICB9LFxuICAgIHBsYXlDbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgY2MuYXVkaW9FbmdpbmUucGxheSh0aGlzLmNsaWNrLCBmYWxzZSwgMSk7XG4gICAgfSxcbiAgICBwbGF5U3dhcDogZnVuY3Rpb24oKXtcbiAgICAgICAgY2MuYXVkaW9FbmdpbmUucGxheSh0aGlzLnN3YXAsIGZhbHNlLCAxKTtcbiAgICB9LFxuICAgIHBsYXlFbGltaW5hdGU6IGZ1bmN0aW9uKHN0ZXApe1xuICAgICAgICBzdGVwID0gTWF0aC5taW4odGhpcy5lbGltaW5hdGUubGVuZ3RoIC0gMSwgc3RlcCk7XG4gICAgICAgIGNjLmF1ZGlvRW5naW5lLnBsYXkodGhpcy5lbGltaW5hdGVbc3RlcF0sIGZhbHNlLCAxKTtcbiAgICB9LFxuICAgIHBsYXlDb250aW51b3VzTWF0Y2g6IGZ1bmN0aW9uKHN0ZXApe1xuICAgICAgICBjb25zb2xlLmxvZyhcInN0ZXAgPSBcIiwgc3RlcCk7XG4gICAgICAgIHN0ZXAgPSBNYXRoLm1pbihzdGVwLCAxMSk7XG4gICAgICAgIGlmKHN0ZXAgPCAyKXtcbiAgICAgICAgICAgIHJldHVybiBcbiAgICAgICAgfVxuICAgICAgICBjYy5hdWRpb0VuZ2luZS5wbGF5KHRoaXMuY29udGludW91c01hdGNoW01hdGguZmxvb3Ioc3RlcC8yKSAtIDFdLCBmYWxzZSwgMSk7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIChkdCkge30sXG59KTtcbiJdfQ==
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/View/EffectLayer.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '0e925myn0dIjqdao1TpipF9', 'EffectLayer');
// Script/View/EffectLayer.js

"use strict";

var _ConstValue = require("../Model/ConstValue");

var _AudioUtils = _interopRequireDefault(require("../Utils/AudioUtils"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

cc.Class({
  "extends": cc.Component,
  properties: {
    // foo: {
    //    default: null,      // The default value will be used only when the component attaching
    //                           to a node for the first time
    //    url: cc.Texture2D,  // optional, default is typeof default
    //    serializable: true, // optional, default is true
    //    visible: true,      // optional, default is true
    //    displayName: 'Foo', // optional
    //    readonly: false,    // optional, default is false
    // },
    // ...
    bombWhite: {
      "default": null,
      type: cc.Prefab
    },
    crushEffect: {
      "default": null,
      type: cc.Prefab
    },
    audioUtils: {
      type: _AudioUtils["default"],
      "default": null
    }
  },
  // use this for initialization
  onLoad: function onLoad() {},
  playEffects: function playEffects(effectQueue) {
    if (!effectQueue || effectQueue.length <= 0) {
      return;
    }

    var soundMap = {}; //某一时刻，某一种声音是否播放过的标记，防止重复播放

    effectQueue.forEach(function (cmd) {
      var delayTime = cc.delayTime(cmd.playTime);
      var callFunc = cc.callFunc(function () {
        var instantEffect = null;
        var animation = null;

        if (cmd.action == "crush") {
          instantEffect = cc.instantiate(this.crushEffect);
          animation = instantEffect.getComponent(cc.Animation);
          animation.play("effect");
          !soundMap["crush" + cmd.playTime] && this.audioUtils.playEliminate(cmd.step);
          soundMap["crush" + cmd.playTime] = true;
        } else if (cmd.action == "rowBomb") {
          instantEffect = cc.instantiate(this.bombWhite);
          animation = instantEffect.getComponent(cc.Animation);
          animation.play("effect_line");
        } else if (cmd.action == "colBomb") {
          instantEffect = cc.instantiate(this.bombWhite);
          animation = instantEffect.getComponent(cc.Animation);
          animation.play("effect_col");
        }

        instantEffect.x = _ConstValue.CELL_WIDTH * (cmd.pos.x - 0.5);
        instantEffect.y = _ConstValue.CELL_WIDTH * (cmd.pos.y - 0.5);
        instantEffect.parent = this.node;
        animation.on("finished", function () {
          instantEffect.destroy();
        }, this);
      }, this);
      this.node.runAction(cc.sequence(delayTime, callFunc));
    }, this);
  } // called every frame, uncomment this function to activate update callback
  // update: function (dt) {
  // },

});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvVmlldy9FZmZlY3RMYXllci5qcyJdLCJuYW1lcyI6WyJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsImJvbWJXaGl0ZSIsInR5cGUiLCJQcmVmYWIiLCJjcnVzaEVmZmVjdCIsImF1ZGlvVXRpbHMiLCJBdWRpb1V0aWxzIiwib25Mb2FkIiwicGxheUVmZmVjdHMiLCJlZmZlY3RRdWV1ZSIsImxlbmd0aCIsInNvdW5kTWFwIiwiZm9yRWFjaCIsImNtZCIsImRlbGF5VGltZSIsInBsYXlUaW1lIiwiY2FsbEZ1bmMiLCJpbnN0YW50RWZmZWN0IiwiYW5pbWF0aW9uIiwiYWN0aW9uIiwiaW5zdGFudGlhdGUiLCJnZXRDb21wb25lbnQiLCJBbmltYXRpb24iLCJwbGF5IiwicGxheUVsaW1pbmF0ZSIsInN0ZXAiLCJ4IiwiQ0VMTF9XSURUSCIsInBvcyIsInkiLCJwYXJlbnQiLCJub2RlIiwib24iLCJkZXN0cm95IiwicnVuQWN0aW9uIiwic2VxdWVuY2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBRUE7Ozs7QUFDQUEsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQUMsSUFBQUEsU0FBUyxFQUFDO0FBQ04saUJBQVMsSUFESDtBQUVOQyxNQUFBQSxJQUFJLEVBQUVMLEVBQUUsQ0FBQ007QUFGSCxLQVhGO0FBZVJDLElBQUFBLFdBQVcsRUFBQztBQUNSLGlCQUFTLElBREQ7QUFFUkYsTUFBQUEsSUFBSSxFQUFFTCxFQUFFLENBQUNNO0FBRkQsS0FmSjtBQW1CUkUsSUFBQUEsVUFBVSxFQUFDO0FBQ1BILE1BQUFBLElBQUksRUFBRUksc0JBREM7QUFFUCxpQkFBUztBQUZGO0FBbkJILEdBSFA7QUE0Qkw7QUFDQUMsRUFB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e0NFTExfV0lEVEh9IGZyb20gJy4uL01vZGVsL0NvbnN0VmFsdWUnO1xuXG5pbXBvcnQgQXVkaW9VdGlscyBmcm9tIFwiLi4vVXRpbHMvQXVkaW9VdGlsc1wiO1xuY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgLy8gZm9vOiB7XG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxuICAgICAgICAvLyB9LFxuICAgICAgICAvLyAuLi5cbiAgICAgICAgYm9tYldoaXRlOntcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5QcmVmYWJcbiAgICAgICAgfSxcbiAgICAgICAgY3J1c2hFZmZlY3Q6e1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLlByZWZhYlxuICAgICAgICB9LFxuICAgICAgICBhdWRpb1V0aWxzOntcbiAgICAgICAgICAgIHR5cGU6IEF1ZGlvVXRpbHMsXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgICB9LFxuICAgIHBsYXlFZmZlY3RzOiBmdW5jdGlvbihlZmZlY3RRdWV1ZSl7XG4gICAgICAgIGlmKCFlZmZlY3RRdWV1ZSB8fCBlZmZlY3RRdWV1ZS5sZW5ndGggPD0gMCl7XG4gICAgICAgICAgICByZXR1cm4gO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzb3VuZE1hcCA9IHt9OyAvL+afkOS4gOaXtuWIu++8jOafkOS4gOenjeWjsOmfs+aYr+WQpuaSreaUvui/h+eahOagh+iusO+8jOmYsuatoumHjeWkjeaSreaUvlxuICAgICAgICBlZmZlY3RRdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uKGNtZCl7XG4gICAgICAgICAgICBsZXQgZGVsYXlUaW1lID0gY2MuZGVsYXlUaW1lKGNtZC5wbGF5VGltZSk7XG4gICAgICAgICAgICBsZXQgY2FsbEZ1bmMgPSBjYy5jYWxsRnVuYyhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGxldCBpbnN0YW50RWZmZWN0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBsZXQgYW5pbWF0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZihjbWQuYWN0aW9uID09IFwiY3J1c2hcIil7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbnRFZmZlY3QgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmNydXNoRWZmZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uICA9IGluc3RhbnRFZmZlY3QuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5wbGF5KFwiZWZmZWN0XCIpO1xuICAgICAgICAgICAgICAgICAgICAhc291bmRNYXBbXCJjcnVzaFwiICsgY21kLnBsYXlUaW1lXSAmJiB0aGlzLmF1ZGlvVXRpbHMucGxheUVsaW1pbmF0ZShjbWQuc3RlcCk7XG4gICAgICAgICAgICAgICAgICAgIHNvdW5kTWFwW1wiY3J1c2hcIiArIGNtZC5wbGF5VGltZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmKGNtZC5hY3Rpb24gPT0gXCJyb3dCb21iXCIpe1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW50RWZmZWN0ID0gY2MuaW5zdGFudGlhdGUodGhpcy5ib21iV2hpdGUpO1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24gID0gaW5zdGFudEVmZmVjdC5nZXRDb21wb25lbnQoY2MuQW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLnBsYXkoXCJlZmZlY3RfbGluZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZihjbWQuYWN0aW9uID09IFwiY29sQm9tYlwiKXtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFudEVmZmVjdCA9IGNjLmluc3RhbnRpYXRlKHRoaXMuYm9tYldoaXRlKTtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uICA9IGluc3RhbnRFZmZlY3QuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5wbGF5KFwiZWZmZWN0X2NvbFwiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpbnN0YW50RWZmZWN0LnggPSBDRUxMX1dJRFRIICogKGNtZC5wb3MueCAtIDAuNSk7XG4gICAgICAgICAgICAgICAgaW5zdGFudEVmZmVjdC55ID0gQ0VMTF9XSURUSCAqIChjbWQucG9zLnkgLSAwLjUpO1xuICAgICAgICAgICAgICAgIGluc3RhbnRFZmZlY3QucGFyZW50ID0gdGhpcy5ub2RlO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5vbihcImZpbmlzaGVkXCIsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFudEVmZmVjdC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfSx0aGlzKTtcbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSx0aGlzKTtcbiAgICAgICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoZGVsYXlUaW1lLCBjYWxsRnVuYykpO1xuICAgICAgICB9LHRoaXMpO1xuICAgIH0sXG5cbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XG5cbiAgICAvLyB9LFxufSk7XG4iXX0=
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Controller/GameController.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5ac64Iq16lBqrHZ0246FRcZ', 'GameController');
// Script/Controller/GameController.js

"use strict";

var _GameModel = _interopRequireDefault(require("../Model/GameModel"));

var _Toast = _interopRequireDefault(require("../Utils/Toast"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

cc.Class({
  "extends": cc.Component,
  properties: {
    grid: {
      "default": null,
      type: cc.Node
    },
    audioButton: {
      "default": null,
      type: cc.Node
    },
    audioSource: {
      type: cc.AudioSource
    }
  },
  // use this for initialization
  onLoad: function onLoad() {
    var audioButton = this.node.parent.getChildByName('audioButton');
    audioButton.on('click', this.callback, this);
    this.gameModel = new _GameModel["default"]();
    this.gameModel.init(4);
    var gridScript = this.grid.getComponent("GridView");
    gridScript.setController(this);
    gridScript.initWithCellModels(this.gameModel.getCells());
    this.audioSource = cc.find('Canvas/GameScene')._components[1].audio;
  },
  callback: function callback() {
    var state = this.audioSource._state;
    state === 1 ? this.audioSource.pause() : this.audioSource.play();
    (0, _Toast["default"])(state === 1 ? '关闭背景音乐🎵' : '打开背景音乐🎵');
  },
  selectCell: function selectCell(pos) {
    return this.gameModel.selectCell(pos);
  },
  cleanCmd: function cleanCmd() {
    this.gameModel.cleanCmd();
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvQ29udHJvbGxlci9HYW1lQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsImdyaWQiLCJ0eXBlIiwiTm9kZSIsImF1ZGlvQnV0dG9uIiwiYXVkaW9Tb3VyY2UiLCJBdWRpb1NvdXJjZSIsIm9uTG9hZCIsIm5vZGUiLCJwYXJlbnQiLCJnZXRDaGlsZEJ5TmFtZSIsIm9uIiwiY2FsbGJhY2siLCJnYW1lTW9kZWwiLCJHYW1lTW9kZWwiLCJpbml0IiwiZ3JpZFNjcmlwdCIsImdldENvbXBvbmVudCIsInNldENvbnRyb2xsZXIiLCJpbml0V2l0aENlbGxNb2RlbHMiLCJnZXRDZWxscyIsImZpbmQiLCJfY29tcG9uZW50cyIsImF1ZGlvIiwic3RhdGUiLCJfc3RhdGUiLCJwYXVzZSIsInBsYXkiLCJzZWxlY3RDZWxsIiwicG9zIiwiY2xlYW5DbWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQUEsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDUCxhQUFTRCxFQUFFLENBQUNFLFNBREw7QUFFUEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1ZDLElBQUFBLElBQUksRUFBRTtBQUNKLGlCQUFTLElBREw7QUFFSkMsTUFBQUEsSUFBSSxFQUFFTCxFQUFFLENBQUNNO0FBRkwsS0FESTtBQUtWQyxJQUFBQSxXQUFXLEVBQUU7QUFDWCxpQkFBUyxJQURFO0FBRVhGLE1BQUFBLElBQUksRUFBRUwsRUFBRSxDQUFDTTtBQUZFLEtBTEg7QUFTVkUsSUFBQUEsV0FBVyxFQUFFO0FBQ1hILE1BQUFBLElBQUksRUFBRUwsRUFBRSxDQUFDUztBQURFO0FBVEgsR0FGTDtBQWVQO0FBQ0FDLEVBQUFBLE1BQU0sRUFBRSxrQkFBWTtBQUNsQixRQUFJSCxXQUFXLEdBQUcsS0FBS0ksSUFBTCxDQUFVQyxNQUFWLENBQWlCQyxjQUFqQixDQUFnQyxhQUFoQyxDQUFsQjtBQUNBTixJQUFBQSxXQUFXLENBQUNPLEVBQVosQ0FBZSxPQUFmLEVBQXdCLEtBQUtDLFFBQTdCLEVBQXVDLElBQXZDO0FBQ0EsU0FBS0MsU0FBTCxHQUFpQixJQUFJQyxxQkFBSixFQUFqQjtBQUNBLFNBQUtELFNBQUwsQ0FBZUUsSUFBZixDQUFvQixDQUFwQjtBQUNBLFFBQUlDLFVBQVUsR0FBRyxLQUFLZixJQUFMLENBQVVnQixZQUFWLENBQXVCLFVBQXZCLENBQWpCO0FBQ0FELElBQUFBLFVBQVUsQ0FBQ0UsYUFBWCxDQUF5QixJQUF6QjtBQUNBRixJQUFBQSxVQUFVLENBQUNHLGtCQUFYLENBQThCLEtBQUtOLFNBQUwsQ0FBZU8sUUFBZixFQUE5QjtBQUNBLFNBQUtmLFdBQUwsR0FBbUJSLEVBQUUsQ0FBQ3dCLElBQUgsQ0FBUSxrQkFBUixFQUE0QkMsV0FBNUIsQ0FBd0MsQ0FBeEMsRUFBMkNDLEtBQTlEO0FBQ0QsR0F6Qk07QUEyQlBYLEVBQUFBLFFBQVEsRUFBRSxvQkFBWTtBQUNwQixRQUFJWSxLQUFLLEdBQUcsS0FBS25CLFdBQUwsQ0FBaUJvQixNQUE3QjtBQUNBRCxJQUFBQSxLQUFLLEtBQUssQ0FBVixHQUFjLEtBQUtuQixXQUFMLENBQWlCcUIsS0FBakIsRUFBZCxHQUF5QyxLQUFLckIsV0FBTCxDQUFpQnNCLElBQWpCLEVBQXpDO0FBQ0EsMkJBQU1ILEtBQUssS0FBSyxDQUFWLEdBQWMsVUFBZCxHQUEyQixVQUFqQztBQUNELEdBL0JNO0FBaUNQSSxFQUFBQSxVQUFVLEVBQUUsb0JBQVVDLEdBQVYsRUFBZTtBQUN6QixXQUFPLEtBQUtoQixTQUFMLENBQWVlLFVBQWYsQ0FBMEJDLEdBQTFCLENBQVA7QUFDRCxHQW5DTTtBQW9DUEMsRUFBQUEsUUFBUSxFQUFFLG9CQUFZO0FBQ3BCLFNBQUtqQixTQUFMLENBQWVpQixRQUFmO0FBQ0Q7QUF0Q00sQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEdhbWVNb2RlbCBmcm9tIFwiLi4vTW9kZWwvR2FtZU1vZGVsXCI7XG5pbXBvcnQgVG9hc3QgZnJvbSAnLi4vVXRpbHMvVG9hc3QnO1xuXG5jYy5DbGFzcyh7XG4gIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcbiAgcHJvcGVydGllczoge1xuICAgIGdyaWQ6IHtcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgfSxcbiAgICBhdWRpb0J1dHRvbjoge1xuICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICB9LFxuICAgIGF1ZGlvU291cmNlOiB7XG4gICAgICB0eXBlOiBjYy5BdWRpb1NvdXJjZVxuICAgIH1cbiAgfSxcbiAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXG4gIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgIGxldCBhdWRpb0J1dHRvbiA9IHRoaXMubm9kZS5wYXJlbnQuZ2V0Q2hpbGRCeU5hbWUoJ2F1ZGlvQnV0dG9uJylcbiAgICBhdWRpb0J1dHRvbi5vbignY2xpY2snLCB0aGlzLmNhbGxiYWNrLCB0aGlzKVxuICAgIHRoaXMuZ2FtZU1vZGVsID0gbmV3IEdhbWVNb2RlbCgpO1xuICAgIHRoaXMuZ2FtZU1vZGVsLmluaXQoNCk7XG4gICAgdmFyIGdyaWRTY3JpcHQgPSB0aGlzLmdyaWQuZ2V0Q29tcG9uZW50KFwiR3JpZFZpZXdcIik7XG4gICAgZ3JpZFNjcmlwdC5zZXRDb250cm9sbGVyKHRoaXMpO1xuICAgIGdyaWRTY3JpcHQuaW5pdFdpdGhDZWxsTW9kZWxzKHRoaXMuZ2FtZU1vZGVsLmdldENlbGxzKCkpO1xuICAgIHRoaXMuYXVkaW9Tb3VyY2UgPSBjYy5maW5kKCdDYW52YXMvR2FtZVNjZW5lJykuX2NvbXBvbmVudHNbMV0uYXVkaW87XG4gIH0sXG5cbiAgY2FsbGJhY2s6IGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgc3RhdGUgPSB0aGlzLmF1ZGlvU291cmNlLl9zdGF0ZTtcbiAgICBzdGF0ZSA9PT0gMSA/IHRoaXMuYXVkaW9Tb3VyY2UucGF1c2UoKSA6IHRoaXMuYXVkaW9Tb3VyY2UucGxheSgpXG4gICAgVG9hc3Qoc3RhdGUgPT09IDEgPyAn5YWz6Zet6IOM5pmv6Z+z5LmQ8J+OtScgOiAn5omT5byA6IOM5pmv6Z+z5LmQ8J+OtScgKVxuICB9LFxuXG4gIHNlbGVjdENlbGw6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICByZXR1cm4gdGhpcy5nYW1lTW9kZWwuc2VsZWN0Q2VsbChwb3MpO1xuICB9LFxuICBjbGVhbkNtZDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZ2FtZU1vZGVsLmNsZWFuQ21kKCk7XG4gIH1cbn0pO1xuIl19
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Model/CellModel.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'dae88GCevBMaK7lQqhume8G', 'CellModel');
// Script/Model/CellModel.js

"use strict";

exports.__esModule = true;
exports["default"] = void 0;

var _ConstValue = require("./ConstValue");

var CellModel = /*#__PURE__*/function () {
  function CellModel() {
    this.type = null;
    this.status = _ConstValue.CELL_STATUS.COMMON;
    this.x = 1;
    this.y = 1;
    this.startX = 1;
    this.startY = 1;
    this.cmd = [];
    this.isDeath = false;
    this.objecCount = Math.floor(Math.random() * 1000);
  }

  var _proto = CellModel.prototype;

  _proto.init = function init(type) {
    this.type = type;
  };

  _proto.isEmpty = function isEmpty() {
    return this.type == _ConstValue.CELL_TYPE.EMPTY;
  };

  _proto.setEmpty = function setEmpty() {
    this.type = _ConstValue.CELL_TYPE.EMPTY;
  };

  _proto.setXY = function setXY(x, y) {
    this.x = x;
    this.y = y;
  };

  _proto.setStartXY = function setStartXY(x, y) {
    this.startX = x;
    this.startY = y;
  };

  _proto.setStatus = function setStatus(status) {
    this.status = status;
  };

  _proto.moveToAndBack = function moveToAndBack(pos) {
    var srcPos = cc.v2(this.x, this.y);
    this.cmd.push({
      action: "moveTo",
      keepTime: _ConstValue.ANITIME.TOUCH_MOVE,
      playTime: 0,
      pos: pos
    });
    this.cmd.push({
      action: "moveTo",
      keepTime: _ConstValue.ANITIME.TOUCH_MOVE,
      playTime: _ConstValue.ANITIME.TOUCH_MOVE,
      pos: srcPos
    });
  };

  _proto.moveTo = function moveTo(pos, playTime) {
    var srcPos = cc.v2(this.x, this.y);
    this.cmd.push({
      action: "moveTo",
      keepTime: _ConstValue.ANITIME.TOUCH_MOVE,
      playTime: playTime,
      pos: pos
    });
    this.x = pos.x;
    this.y = pos.y;
  };

  _proto.toDie = function toDie(playTime) {
    this.cmd.push({
      action: "toDie",
      playTime: playTime,
      keepTime: _ConstValue.ANITIME.DIE
    });
    this.isDeath = true;
  };

  _proto.toShake = function toShake(playTime) {
    this.cmd.push({
      action: "toShake",
      playTime: playTime,
      keepTime: _ConstValue.ANITIME.DIE_SHAKE
    });
  };

  _proto.setVisible = function setVisible(playTime, isVisible) {
    this.cmd.push({
      action: "setVisible",
      playTime: playTime,
      keepTime: 0,
      isVisible: isVisible
    });
  };

  _proto.moveToAndDie = function moveToAndDie(pos) {};

  _proto.isBird = function isBird() {
    return this.type == _ConstValue.CELL_TYPE.G;
  };

  return CellModel;
}();

exports["default"] = CellModel;
module.exports = exports["default"];

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvTW9kZWwvQ2VsbE1vZGVsLmpzIl0sIm5hbWVzIjpbIkNlbGxNb2RlbCIsInR5cGUiLCJzdGF0dXMiLCJDRUxMX1NUQVRVUyIsIkNPTU1PTiIsIngiLCJ5Iiwic3RhcnRYIiwic3RhcnRZIiwiY21kIiwiaXNEZWF0aCIsIm9iamVjQ291bnQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJpbml0IiwiaXNFbXB0eSIsIkNFTExfVFlQRSIsIkVNUFRZIiwic2V0RW1wdHkiLCJzZXRYWSIsInNldFN0YXJ0WFkiLCJzZXRTdGF0dXMiLCJtb3ZlVG9BbmRCYWNrIiwicG9zIiwic3JjUG9zIiwiY2MiLCJ2MiIsInB1c2giLCJhY3Rpb24iLCJrZWVwVGltZSIsIkFOSVRJTUUiLCJUT1VDSF9NT1ZFIiwicGxheVRpbWUiLCJtb3ZlVG8iLCJ0b0RpZSIsIkRJRSIsInRvU2hha2UiLCJESUVfU0hBS0UiLCJzZXRWaXNpYmxlIiwiaXNWaXNpYmxlIiwibW92ZVRvQW5kRGllIiwiaXNCaXJkIiwiRyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7SUFDcUJBO0FBQ25CLHVCQUFjO0FBQ1osU0FBS0MsSUFBTCxHQUFZLElBQVo7QUFDQSxTQUFLQyxNQUFMLEdBQWNDLHdCQUFZQyxNQUExQjtBQUNBLFNBQUtDLENBQUwsR0FBUyxDQUFUO0FBQ0EsU0FBS0MsQ0FBTCxHQUFTLENBQVQ7QUFDQSxTQUFLQyxNQUFMLEdBQWMsQ0FBZDtBQUNBLFNBQUtDLE1BQUwsR0FBYyxDQUFkO0FBQ0EsU0FBS0MsR0FBTCxHQUFXLEVBQVg7QUFDQSxTQUFLQyxPQUFMLEdBQWUsS0FBZjtBQUNBLFNBQUtDLFVBQUwsR0FBa0JDLElBQUksQ0FBQ0MsS0FBTCxDQUFXRCxJQUFJLENBQUNFLE1BQUwsS0FBZ0IsSUFBM0IsQ0FBbEI7QUFDRDs7OztTQUVEQyxPQUFBLGNBQUtkLElBQUwsRUFBVztBQUNULFNBQUtBLElBQUwsR0FBWUEsSUFBWjtBQUNE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QUFPLEtBQUt6QyxJQUFMLElBQWFnQixzQkFBVTBCLENBQTlCO0FBQ0QiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENFTExfVFlQRSwgQU5JVElNRSwgQ0VMTF9TVEFUVVMsIEdSSURfSEVJR0hUIH0gZnJvbSBcIi4vQ29uc3RWYWx1ZVwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2VsbE1vZGVsIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50eXBlID0gbnVsbDtcbiAgICB0aGlzLnN0YXR1cyA9IENFTExfU1RBVFVTLkNPTU1PTjtcbiAgICB0aGlzLnggPSAxO1xuICAgIHRoaXMueSA9IDE7XG4gICAgdGhpcy5zdGFydFggPSAxO1xuICAgIHRoaXMuc3RhcnRZID0gMTtcbiAgICB0aGlzLmNtZCA9IFtdO1xuICAgIHRoaXMuaXNEZWF0aCA9IGZhbHNlO1xuICAgIHRoaXMub2JqZWNDb3VudCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDApO1xuICB9XG5cbiAgaW5pdCh0eXBlKSB7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgfVxuXG4gIGlzRW1wdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZSA9PSBDRUxMX1RZUEUuRU1QVFk7XG4gIH1cblxuICBzZXRFbXB0eSgpIHtcbiAgICB0aGlzLnR5cGUgPSBDRUxMX1RZUEUuRU1QVFk7XG4gIH1cbiAgc2V0WFkoeCwgeSkge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgfVxuXG4gIHNldFN0YXJ0WFkoeCwgeSkge1xuICAgIHRoaXMuc3RhcnRYID0geDtcbiAgICB0aGlzLnN0YXJ0WSA9IHk7XG4gIH1cblxuICBzZXRTdGF0dXMoc3RhdHVzKSB7XG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gIH1cblxuICBtb3ZlVG9BbmRCYWNrKHBvcykge1xuICAgIHZhciBzcmNQb3MgPSBjYy52Mih0aGlzLngsIHRoaXMueSk7XG4gICAgdGhpcy5jbWQucHVzaCh7XG4gICAgICBhY3Rpb246IFwibW92ZVRvXCIsXG4gICAgICBrZWVwVGltZTogQU5JVElNRS5UT1VDSF9NT1ZFLFxuICAgICAgcGxheVRpbWU6IDAsXG4gICAgICBwb3M6IHBvc1xuICAgIH0pO1xuICAgIHRoaXMuY21kLnB1c2goe1xuICAgICAgYWN0aW9uOiBcIm1vdmVUb1wiLFxuICAgICAga2VlcFRpbWU6IEFOSVRJTUUuVE9VQ0hfTU9WRSxcbiAgICAgIHBsYXlUaW1lOiBBTklUSU1FLlRPVUNIX01PVkUsXG4gICAgICBwb3M6IHNyY1Bvc1xuICAgIH0pO1xuICB9XG5cbiAgbW92ZVRvKHBvcywgcGxheVRpbWUpIHtcbiAgICB2YXIgc3JjUG9zID0gY2MudjIodGhpcy54LCB0aGlzLnkpO1xuICAgIHRoaXMuY21kLnB1c2goe1xuICAgICAgYWN0aW9uOiBcIm1vdmVUb1wiLFxuICAgICAga2VlcFRpbWU6IEFOSVRJTUUuVE9VQ0hfTU9WRSxcbiAgICAgIHBsYXlUaW1lOiBwbGF5VGltZSxcbiAgICAgIHBvczogcG9zXG4gICAgfSk7XG4gICAgdGhpcy54ID0gcG9zLng7XG4gICAgdGhpcy55ID0gcG9zLnk7XG4gIH1cblxuICB0b0RpZShwbGF5VGltZSkge1xuICAgIHRoaXMuY21kLnB1c2goe1xuICAgICAgYWN0aW9uOiBcInRvRGllXCIsXG4gICAgICBwbGF5VGltZTogcGxheVRpbWUsXG4gICAgICBrZWVwVGltZTogQU5JVElNRS5ESUVcbiAgICB9KTtcbiAgICB0aGlzLmlzRGVhdGggPSB0cnVlO1xuICB9XG5cbiAgdG9TaGFrZShwbGF5VGltZSkge1xuICAgIHRoaXMuY21kLnB1c2goe1xuICAgICAgYWN0aW9uOiBcInRvU2hha2VcIixcbiAgICAgIHBsYXlUaW1lOiBwbGF5VGltZSxcbiAgICAgIGtlZXBUaW1lOiBBTklUSU1FLkRJRV9TSEFLRVxuICAgIH0pO1xuICB9XG5cbiAgc2V0VmlzaWJsZShwbGF5VGltZSwgaXNWaXNpYmxlKSB7XG4gICAgdGhpcy5jbWQucHVzaCh7XG4gICAgICBhY3Rpb246IFwic2V0VmlzaWJsZVwiLFxuICAgICAgcGxheVRpbWU6IHBsYXlUaW1lLFxuICAgICAga2VlcFRpbWU6IDAsXG4gICAgICBpc1Zpc2libGU6IGlzVmlzaWJsZVxuICAgIH0pO1xuICB9XG5cbiAgbW92ZVRvQW5kRGllKHBvcykge1xuXG4gIH1cblxuICBpc0JpcmQoKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZSA9PSBDRUxMX1RZUEUuRztcbiAgfVxuXG59XG4iXX0=
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Model/ConstValue.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'f9088esGbNBtJmNaJsz0Gq4', 'ConstValue');
// Script/Model/ConstValue.js

"use strict";

exports.__esModule = true;
exports.ANITIME = exports.GRID_PIXEL_HEIGHT = exports.GRID_PIXEL_WIDTH = exports.CELL_HEIGHT = exports.CELL_WIDTH = exports.GRID_HEIGHT = exports.GRID_WIDTH = exports.CELL_STATUS = exports.CELL_BASENUM = exports.CELL_TYPE = void 0;
var CELL_TYPE = {
  EMPTY: 0,
  A: 1,
  B: 2,
  C: 3,
  D: 4,
  E: 5,
  F: 6,
  BIRD: 7
};
exports.CELL_TYPE = CELL_TYPE;
var CELL_BASENUM = 6;
exports.CELL_BASENUM = CELL_BASENUM;
var CELL_STATUS = {
  COMMON: 0,
  CLICK: "click",
  LINE: "line",
  COLUMN: "column",
  WRAP: "wrap",
  BIRD: "bird"
};
exports.CELL_STATUS = CELL_STATUS;
var GRID_WIDTH = 9;
exports.GRID_WIDTH = GRID_WIDTH;
var GRID_HEIGHT = 9;
exports.GRID_HEIGHT = GRID_HEIGHT;
var CELL_WIDTH = 70;
exports.CELL_WIDTH = CELL_WIDTH;
var CELL_HEIGHT = 70;
exports.CELL_HEIGHT = CELL_HEIGHT;
var GRID_PIXEL_WIDTH = GRID_WIDTH * CELL_WIDTH;
exports.GRID_PIXEL_WIDTH = GRID_PIXEL_WIDTH;
var GRID_PIXEL_HEIGHT = GRID_HEIGHT * CELL_HEIGHT; // ********************   时间表  animation time **************************

exports.GRID_PIXEL_HEIGHT = GRID_PIXEL_HEIGHT;
var ANITIME = {
  TOUCH_MOVE: 0.3,
  DIE: 0.2,
  DOWN: 0.5,
  BOMB_DELAY: 0.3,
  BOMB_BIRD_DELAY: 0.7,
  DIE_SHAKE: 0.4 // 死前抖动

};
exports.ANITIME = ANITIME;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvTW9kZWwvQ29uc3RWYWx1ZS5qcyJdLCJuYW1lcyI6WyJDRUxMX1RZUEUiLCJFTVBUWSIsIkEiLCJCIiwiQyIsIkQiLCJFIiwiRiIsIkJJUkQiLCJDRUxMX0JBU0VOVU0iLCJDRUxMX1NUQVRVUyIsIkNPTU1PTiIsIkNMSUNLIiwiTElORSIsIkNPTFVNTiIsIldSQVAiLCJHUklEX1dJRFRIIiwiR1JJRF9IRUlHSFQiLCJDRUxMX1dJRFRIIiwiQ0VMTF9IRUlHSFQiLCJHUklEX1BJWEVMX1dJRFRIIiwiR1JJRF9QSVhFTF9IRUlHSFQiLCJBTklUSU1FIiwiVE9VQ0hfTU9WRSIsIkRJRSIsIkRPV04iLCJCT01CX0RFTEFZIiwiQk9NQl9CSVJEX0RFTEFZIiwiRElFX1NIQUtFIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ08sSUFBTUEsU0FBUyxHQUFHO0FBQ3ZCQyxFQUFBQSxLQUFLLEVBQUUsQ0FEZ0I7QUFFdkJDLEVBQUFBLENBQUMsRUFBRSxDQUZvQjtBQUd2QkMsRUFBQUEsQ0FBQyxFQUFFLENBSG9CO0FBSXZCQyxFQUFBQSxDQUFDLEVBQUUsQ0FKb0I7QUFLdkJDLEVBQUFBLENBQUMsRUFBRSxDQUxvQjtBQU12QkMsRUFBQUEsQ0FBQyxFQUFFLENBTm9CO0FBT3ZCQyxFQUFBQSxDQUFDLEVBQUUsQ0FQb0I7QUFRdkJDLEVBQUFBLElBQUksRUFBRTtBQVJpQixDQUFsQjs7QUFVQSxJQUFNQyxZQUFZLEdBQUcsQ0FBckI7O0FBQ0EsSUFBTUMsV0FBVyxHQUFHO0FBQ3pCQyxFQUFBQSxNQUFNLEVBQUUsQ0FEaUI7QUFFekJDLEVBQUFBLEtBQUssRUFBRSxPQUZrQjtBQUd6QkMsRUFBQUEsSUFBSSxFQUFFLE1BSG1CO0FBSXpCQyxFQUFBQSxNQUFNLEVBQUUsUUFKaUI7QUFLekJDLEVBQUFBLElBQUksRUFBRSxNQUxtQjtBQU16QlAsRUFBQUEsSUFBSSxFQUFFO0FBTm1CLENBQXBCOztBQVNBLElBQU1RLFVBQVUsR0FBRyxDQUFuQjs7QUFDQSxJQUFNQyxXQUFXLEdBQUcsQ0FBcEI7O0FBRUEsSUFBTUMsVUFBVSxHQUFHLEVBQW5COztBQUNBLElBQU1DLFdBQVcsR0FBRyxFQUFwQjs7QUFFQSxJQUFNQyxnQkFBZ0IsR0FBR0osVUFBVSxHQUFHRSxVQUF0Qzs7QUFDQSxJQUFNRyxpQkFBaUIsR0FBR0osV0FBVyxHQUFHRSxXQUF4QyxFQUdQOzs7QUFDTyxJQUFNRyxPQUFPLEdBQUc7QUFDckJDLEVBQUFBLFVBQVUsRUFBRSxHQURTO0FBRXJCQyxFQUFBQSxHQUFHLEVBQUUsR0FGZ0I7QUFHckJDLEVBQUFBLElBQUksRUFBRSxHQUhlO0FBSXJCQyxFQUFBQSxVQUFVLEVBQUUsR0FKUztBQUtyQkMsRUFBQUEsZUFBZSxFQUFFLEdBTEk7QUFNckJDLEVBQUFBLFNBQVMsRUFBRSxHQU5VLENBTU47O0FBTk0sQ0FBaEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IGNvbnN0IENFTExfVFlQRSA9IHtcbiAgRU1QVFk6IDAsXG4gIEE6IDEsXG4gIEI6IDIsXG4gIEM6IDMsXG4gIEQ6IDQsXG4gIEU6IDUsXG4gIEY6IDYsXG4gIEJJUkQ6IDdcbn1cbmV4cG9ydCBjb25zdCBDRUxMX0JBU0VOVU0gPSA2O1xuZXhwb3J0IGNvbnN0IENFTExfU1RBVFVTID0ge1xuICBDT01NT046IDAsXG4gIENMSUNLOiBcImNsaWNrXCIsXG4gIExJTkU6IFwibGluZVwiLFxuICBDT0xVTU46IFwiY29sdW1uXCIsXG4gIFdSQVA6IFwid3JhcFwiLFxuICBCSVJEOiBcImJpcmRcIlxufVxuXG5leHBvcnQgY29uc3QgR1JJRF9XSURUSCA9IDk7XG5leHBvcnQgY29uc3QgR1JJRF9IRUlHSFQgPSA5O1xuXG5leHBvcnQgY29uc3QgQ0VMTF9XSURUSCA9IDcwO1xuZXhwb3J0IGNvbnN0IENFTExfSEVJR0hUID0gNzA7XG5cbmV4cG9ydCBjb25zdCBHUklEX1BJWEVMX1dJRFRIID0gR1JJRF9XSURUSCAqIENFTExfV0lEVEg7XG5leHBvcnQgY29uc3QgR1JJRF9QSVhFTF9IRUlHSFQgPSBHUklEX0hFSUdIVCAqIENFTExfSEVJR0hUO1xuXG5cbi8vICoqKioqKioqKioqKioqKioqKioqICAg5pe26Ze06KGoICBhbmltYXRpb24gdGltZSAqKioqKioqKioqKioqKioqKioqKioqKioqKlxuZXhwb3J0IGNvbnN0IEFOSVRJTUUgPSB7XG4gIFRPVUNIX01PVkU6IDAuMyxcbiAgRElFOiAwLjIsXG4gIERPV046IDAuNSxcbiAgQk9NQl9ERUxBWTogMC4zLFxuICBCT01CX0JJUkRfREVMQVk6IDAuNyxcbiAgRElFX1NIQUtFOiAwLjQgLy8g5q275YmN5oqW5YqoXG59XG5cblxuIl19
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/UnitTest/GameModelTest.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '16fce9lOkpA7a2vuhmMkDMZ', 'GameModelTest');
// Script/UnitTest/GameModelTest.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {// foo: {
    //    default: null,      // The default value will be used only when the component attaching
    //                           to a node for the first time
    //    url: cc.Texture2D,  // optional, default is typeof default
    //    serializable: true, // optional, default is true
    //    visible: true,      // optional, default is true
    //    displayName: 'Foo', // optional
    //    readonly: false,    // optional, default is false
    // },
    // ...
  } // use this for initialization
  // onLoad: function () {
  //     var gameModel = new GameModel();
  //     gameModel.init();
  //     gameModel.printInfo();
  //     for(var i = 1;i<=9;i++){
  //         for(var j = 1;j<=9;j++){
  //             console.log(gameModel.checkPoint(i,j).join(" ,"));
  //         }
  //     }
  // },
  // called every frame, uncomment this function to activate update callback
  // update: function (dt) {
  // },

});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvVW5pdFRlc3QvR2FtZU1vZGVsVGVzdC5qcyJdLCJuYW1lcyI6WyJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQUEsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFLENBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWUSxHQUhQLENBZ0JMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7O0FBL0JLLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImNjLkNsYXNzKHtcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXG5cbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIC8vIGZvbzoge1xuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcbiAgICAgICAgLy8gfSxcbiAgICAgICAgLy8gLi4uXG4gICAgfSxcblxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxuICAgIC8vIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICB2YXIgZ2FtZU1vZGVsID0gbmV3IEdhbWVNb2RlbCgpO1xuICAgIC8vICAgICBnYW1lTW9kZWwuaW5pdCgpO1xuICAgIC8vICAgICBnYW1lTW9kZWwucHJpbnRJbmZvKCk7XG4gICAgLy8gICAgIGZvcih2YXIgaSA9IDE7aTw9OTtpKyspe1xuICAgIC8vICAgICAgICAgZm9yKHZhciBqID0gMTtqPD05O2orKyl7XG4gICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2coZ2FtZU1vZGVsLmNoZWNrUG9pbnQoaSxqKS5qb2luKFwiICxcIikpO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfSxcblxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcblxuICAgIC8vIH0sXG59KTtcbiJdfQ==
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/View/CellView.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'fbf19Cx4ptFV62UZ7+qJJpQ', 'CellView');
// Script/View/CellView.js

"use strict";

var _ConstValue = require("../Model/ConstValue");

cc.Class({
  "extends": cc.Component,
  properties: {
    // foo: {
    //    default: null,      // The default value will be used only when the component attaching
    //                           to a node for the first time
    //    url: cc.Texture2D,  // optional, default is typeof default
    //    serializable: true, // optional, default is true
    //    visible: true,      // optional, default is true
    //    displayName: 'Foo', // optional
    //    readonly: false,    // optional, default is false
    // },
    // ...
    defaultFrame: {
      "default": null,
      type: cc.SpriteFrame
    }
  },
  // use this for initialization
  onLoad: function onLoad() {
    //this.model = null;
    this.isSelect = false;
  },
  initWithModel: function initWithModel(model) {
    this.model = model;
    var x = model.startX;
    var y = model.startY;
    this.node.x = _ConstValue.CELL_WIDTH * (x - 0.5);
    this.node.y = _ConstValue.CELL_HEIGHT * (y - 0.5);
    var animation = this.node.getComponent(cc.Animation);

    if (model.status == _ConstValue.CELL_STATUS.COMMON) {
      animation.stop();
    } else {
      animation.play(model.status);
    }
  },
  // 执行移动动作
  updateView: function updateView() {
    var _this = this;

    var cmd = this.model.cmd;

    if (cmd.length <= 0) {
      return;
    }

    var actionArray = [];
    var curTime = 0;

    for (var i in cmd) {
      if (cmd[i].playTime > curTime) {
        var delay = cc.delayTime(cmd[i].playTime - curTime);
        actionArray.push(delay);
      }

      if (cmd[i].action == "moveTo") {
        var x = (cmd[i].pos.x - 0.5) * _ConstValue.CELL_WIDTH;
        var y = (cmd[i].pos.y - 0.5) * _ConstValue.CELL_HEIGHT;
        var move = cc.moveTo(_ConstValue.ANITIME.TOUCH_MOVE, cc.v2(x, y));
        actionArray.push(move);
      } else if (cmd[i].action == "toDie") {
        if (this.status == _ConstValue.CELL_STATUS.BIRD) {
          var animation = this.node.getComponent(cc.Animation);
          animation.play("effect");
          actionArray.push(cc.delayTime(_ConstValue.ANITIME.BOMB_BIRD_DELAY));
        }

        var callFunc = cc.callFunc(function () {
          this.node.destroy();
        }, this);
        actionArray.push(callFunc);
      } else if (cmd[i].action == "setVisible") {
        (function () {
          var isVisible = cmd[i].isVisible;
          actionArray.push(cc.callFunc(function () {
            if (isVisible) {
              this.node.opacity = 255;
            } else {
              this.node.opacity = 0;
            }
          }, _this));
        })();
      } else if (cmd[i].action == "toShake") {
        var rotateRight = cc.rotateBy(0.06, 30);
        var rotateLeft = cc.rotateBy(0.12, -60);
        actionArray.push(cc.repeat(cc.sequence(rotateRight, rotateLeft, rotateRight), 2));
      }

      curTime = cmd[i].playTime + cmd[i].keepTime;
    }

    if (actionArray.length == 1) {
      this.node.runAction(actionArray[0]);
    } else {
      var _cc;

      this.node.runAction((_cc = cc).sequence.apply(_cc, actionArray));
    }
  },
  // called every frame, uncomment this function to activate update callback
  // update: function (dt) {
  // },
  setSelect: function setSelect(flag) {
    var animation = this.node.getComponent(cc.Animation);
    var bg = this.node.getChildByName("select");

    if (flag == false && this.isSelect && this.model.status == _ConstValue.CELL_STATUS.COMMON) {
      animation.stop();
      this.node.getComponent(cc.Sprite).spriteFrame = this.defaultFrame;
    } else if (flag && this.model.status == _ConstValue.CELL_STATUS.COMMON) {
      animation.play(_ConstValue.CELL_STATUS.CLICK);
    } else if (flag && this.model.status == _ConstValue.CELL_STATUS.BIRD) {
      animation.play(_ConstValue.CELL_STATUS.CLICK);
    }

    bg.active = flag;
    this.isSelect = flag;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvVmlldy9DZWxsVmlldy5qcyJdLCJuYW1lcyI6WyJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsImRlZmF1bHRGcmFtZSIsInR5cGUiLCJTcHJpdGVGcmFtZSIsIm9uTG9hZCIsImlzU2VsZWN0IiwiaW5pdFdpdGhNb2RlbCIsIm1vZGVsIiwieCIsInN0YXJ0WCIsInkiLCJzdGFydFkiLCJub2RlIiwiQ0VMTF9XSURUSCIsIkNFTExfSEVJR0hUIiwiYW5pbWF0aW9uIiwiZ2V0Q29tcG9uZW50IiwiQW5pbWF0aW9uIiwic3RhdHVzIiwiQ0VMTF9TVEFUVVMiLCJDT01NT04iLCJzdG9wIiwicGxheSIsInVwZGF0ZVZpZXciLCJjbWQiLCJsZW5ndGgiLCJhY3Rpb25BcnJheSIsImN1clRpbWUiLCJpIiwicGxheVRpbWUiLCJkZWxheSIsImRlbGF5VGltZSIsInB1c2giLCJhY3Rpb24iLCJwb3MiLCJtb3ZlIiwibW92ZVRvIiwiQU5JVElNRSIsIlRPVUNIX01PVkUiLCJ2MiIsIkJJUkQiLCJCT01CX0JJUkRfREVMQVkiLCJjYWxsRnVuYyIsImRlc3Ryb3kiLCJpc1Zpc2libGUiLCJvcGFjaXR5Iiwicm90YXRlUmlnaHQiLCJyb3RhdGVCeSIsInJvdGF0ZUxlZnQiLCJyZXBlYXQiLCJzZXF1ZW5jZSIsImtlZXBUaW1lIiwicnVuQWN0aW9uIiwic2V0U2VsZWN0IiwiZmxhZyIsImJnIiwiZ2V0Q2hpbGRCeU5hbWUiLCJTcHJpdGUiLCJzcHJpdGVGcmFtZSIsIkNMSUNLIiwiYWN0aXZlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUVBQSxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUNMLGFBQVNELEVBQUUsQ0FBQ0UsU0FEUDtBQUdMQyxFQUFBQSxVQUFVLEVBQUU7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBQyxJQUFBQSxZQUFZLEVBQUM7QUFD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WCxJQUFxQkMsd0JBQVlxQixJQUE1QyxFQUFpRDtBQUNsRHpCLE1BQUFBLFNBQVMsQ0FBQ08sSUFBVixDQUFlSCx3QkFBWXdDLEtBQTNCO0FBQ0g7O0FBQ0RKLElBQUFBLEVBQUUsQ0FBQ0ssTUFBSCxHQUFZTixJQUFaO0FBQ0EsU0FBS2pELFFBQUwsR0FBZ0JpRCxJQUFoQjtBQUNIO0FBbEhJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q0VMTF9TVEFUVVMsIENFTExfV0lEVEgsIENFTExfSEVJR0hULCBBTklUSU1FfSBmcm9tICcuLi9Nb2RlbC9Db25zdFZhbHVlJztcblxuY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgLy8gZm9vOiB7XG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxuICAgICAgICAvLyB9LFxuICAgICAgICAvLyAuLi5cbiAgICAgICAgZGVmYXVsdEZyYW1lOntcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5TcHJpdGVGcmFtZVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAvL3RoaXMubW9kZWwgPSBudWxsO1xuICAgICAgICB0aGlzLmlzU2VsZWN0ID0gZmFsc2U7XG4gICAgfSxcbiAgICBpbml0V2l0aE1vZGVsOiBmdW5jdGlvbihtb2RlbCl7XG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICAgICAgdmFyIHggPSBtb2RlbC5zdGFydFg7XG4gICAgICAgIHZhciB5ID0gbW9kZWwuc3RhcnRZO1xuICAgICAgICB0aGlzLm5vZGUueCA9IENFTExfV0lEVEggKiAoeCAtIDAuNSk7XG4gICAgICAgIHRoaXMubm9kZS55ID0gQ0VMTF9IRUlHSFQgKiAoeSAtIDAuNSk7XG4gICAgICAgIHZhciBhbmltYXRpb24gID0gdGhpcy5ub2RlLmdldENvbXBvbmVudChjYy5BbmltYXRpb24pO1xuICAgICAgICBpZiAobW9kZWwuc3RhdHVzID09IENFTExfU1RBVFVTLkNPTU1PTil7XG4gICAgICAgICAgICBhbmltYXRpb24uc3RvcCgpO1xuICAgICAgICB9IFxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgYW5pbWF0aW9uLnBsYXkobW9kZWwuc3RhdHVzKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLy8g5omn6KGM56e75Yqo5Yqo5L2cXG4gICAgdXBkYXRlVmlldzogZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGNtZCA9IHRoaXMubW9kZWwuY21kO1xuICAgICAgICBpZihjbWQubGVuZ3RoIDw9IDApe1xuICAgICAgICAgICAgcmV0dXJuIDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYWN0aW9uQXJyYXkgPSBbXTtcbiAgICAgICAgdmFyIGN1clRpbWUgPSAwO1xuICAgICAgICBmb3IodmFyIGkgaW4gY21kKXtcbiAgICAgICAgICAgIGlmKCBjbWRbaV0ucGxheVRpbWUgPiBjdXJUaW1lKXtcbiAgICAgICAgICAgICAgICB2YXIgZGVsYXkgPSBjYy5kZWxheVRpbWUoY21kW2ldLnBsYXlUaW1lIC0gY3VyVGltZSk7XG4gICAgICAgICAgICAgICAgYWN0aW9uQXJyYXkucHVzaChkZWxheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihjbWRbaV0uYWN0aW9uID09IFwibW92ZVRvXCIpe1xuICAgICAgICAgICAgICAgIHZhciB4ID0gKGNtZFtpXS5wb3MueCAtIDAuNSkgKiBDRUxMX1dJRFRIO1xuICAgICAgICAgICAgICAgIHZhciB5ID0gKGNtZFtpXS5wb3MueSAtIDAuNSkgKiBDRUxMX0hFSUdIVDtcbiAgICAgICAgICAgICAgICB2YXIgbW92ZSA9IGNjLm1vdmVUbyhBTklUSU1FLlRPVUNIX01PVkUsIGNjLnYyKHgseSkpO1xuICAgICAgICAgICAgICAgIGFjdGlvbkFycmF5LnB1c2gobW92ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKGNtZFtpXS5hY3Rpb24gPT0gXCJ0b0RpZVwiKXtcbiAgICAgICAgICAgICAgICBpZih0aGlzLnN0YXR1cyA9PSBDRUxMX1NUQVRVUy5CSVJEKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFuaW1hdGlvbiA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoY2MuQW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLnBsYXkoXCJlZmZlY3RcIik7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbkFycmF5LnB1c2goY2MuZGVsYXlUaW1lKEFOSVRJTUUuQk9NQl9CSVJEX0RFTEFZKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjYWxsRnVuYyA9IGNjLmNhbGxGdW5jKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfSx0aGlzKTtcbiAgICAgICAgICAgICAgICBhY3Rpb25BcnJheS5wdXNoKGNhbGxGdW5jKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYoY21kW2ldLmFjdGlvbiA9PSBcInNldFZpc2libGVcIil7XG4gICAgICAgICAgICAgICAgbGV0IGlzVmlzaWJsZSA9IGNtZFtpXS5pc1Zpc2libGU7XG4gICAgICAgICAgICAgICAgYWN0aW9uQXJyYXkucHVzaChjYy5jYWxsRnVuYyhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBpZihpc1Zpc2libGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlLm9wYWNpdHkgPSAyNTU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZS5vcGFjaXR5ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sdGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihjbWRbaV0uYWN0aW9uID09IFwidG9TaGFrZVwiKXtcbiAgICAgICAgICAgICAgICBsZXQgcm90YXRlUmlnaHQgPSBjYy5yb3RhdGVCeSgwLjA2LDMwKTtcbiAgICAgICAgICAgICAgICBsZXQgcm90YXRlTGVmdCA9IGNjLnJvdGF0ZUJ5KDAuMTIsIC02MCk7XG4gICAgICAgICAgICAgICAgYWN0aW9uQXJyYXkucHVzaChjYy5yZXBlYXQoY2Muc2VxdWVuY2Uocm90YXRlUmlnaHQsIHJvdGF0ZUxlZnQsIHJvdGF0ZVJpZ2h0KSwgMikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VyVGltZSA9IGNtZFtpXS5wbGF5VGltZSArIGNtZFtpXS5rZWVwVGltZTtcbiAgICAgICAgfVxuICAgICAgICBpZihhY3Rpb25BcnJheS5sZW5ndGggPT0gMSl7XG4gICAgICAgICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKGFjdGlvbkFycmF5WzBdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZSguLi5hY3Rpb25BcnJheSkpO1xuICAgICAgICB9XG5cbiAgICB9LFxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcblxuICAgIC8vIH0sXG4gICAgc2V0U2VsZWN0OiBmdW5jdGlvbihmbGFnKXtcbiAgICAgICAgdmFyIGFuaW1hdGlvbiA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoY2MuQW5pbWF0aW9uKTtcbiAgICAgICAgdmFyIGJnID0gdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKFwic2VsZWN0XCIpO1xuICAgICAgICBpZihmbGFnID09IGZhbHNlICYmIHRoaXMuaXNTZWxlY3QgJiYgdGhpcy5tb2RlbC5zdGF0dXMgPT0gQ0VMTF9TVEFUVVMuQ09NTU9OKXtcbiAgICAgICAgICAgIGFuaW1hdGlvbi5zdG9wKCk7XG4gICAgICAgICAgICB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLmRlZmF1bHRGcmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGZsYWcgJiYgdGhpcy5tb2RlbC5zdGF0dXMgPT0gQ0VMTF9TVEFUVVMuQ09NTU9OKXtcbiAgICAgICAgICAgIGFuaW1hdGlvbi5wbGF5KENFTExfU1RBVFVTLkNMSUNLKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGZsYWcgJiYgdGhpcy5tb2RlbC5zdGF0dXMgPT0gQ0VMTF9TVEFUVVMuQklSRCl7XG4gICAgICAgICAgICBhbmltYXRpb24ucGxheShDRUxMX1NUQVRVUy5DTElDSyk7XG4gICAgICAgIH1cbiAgICAgICAgYmcuYWN0aXZlID0gZmxhZzsgXG4gICAgICAgIHRoaXMuaXNTZWxlY3QgPSBmbGFnO1xuICAgIH1cbn0pO1xuIl19
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Utils/ModelUtils.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5a4d0rEszhGNqSG/EcGQQi5', 'ModelUtils');
// Script/Utils/ModelUtils.ts

Object.defineProperty(exports, "__esModule", { value: true });
exports.exclusivePoint = exports.mergePointArray = void 0;
/**
 * 合并
 * @param rowPoints
 * @param colPoints
 */
function mergePointArray(rowPoints, colPoints) {
    var result = rowPoints.concat();
    colPoints = colPoints.filter(function (colEle) {
        var repeat = false;
        result.forEach(function (rowEle) {
            if (colEle.equals(rowEle)) {
                repeat = true;
            }
        }, this);
        return !repeat;
    }, this);
    result.push.apply(result, colPoints);
    return result;
}
exports.mergePointArray = mergePointArray;
/**
 * 减法
 * @param points
 * @param exclusivePoint
 */
function exclusivePoint(points, exclusivePoint) {
    var result = new Array();
    for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {
        var point = points_1[_i];
        if (!point.equals(exclusivePoint)) {
            result.push(point);
        }
    }
    return result;
}
exports.exclusivePoint = exclusivePoint;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvVXRpbHMvTW9kZWxVdGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7O0dBSUc7QUFDSCxTQUFpQixlQUFlLENBQUMsU0FBcUIsRUFBRSxTQUFvQjtJQUN4RSxJQUFJLE1BQU0sR0FBRyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEMsU0FBUyxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBVSxNQUFNO1FBQ3pDLElBQUksTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNuQixNQUFNLENBQUMsT0FBTyxDQUFDLFVBQVUsTUFBTTtZQUMzQixJQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUM7Z0JBQ3JCLE1BQU0sR0FBRyxJQUFJLENBQUE7YUFDaEI7UUFDTCxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDVCxPQUFPLENBQUMsTUFBTSxDQUFDO0lBQ25CLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNULE1BQU0sQ0FBQyxJQUFJLE9BQVgsTUFBTSxFQUFTLFNBQVMsRUFBRTtJQUMxQixPQUFPLE1BQU0sQ0FBQztBQUNsQixDQUFDO0FBYkQsMENBYUM7QUFFRDs7OztHQUlHO0FBQ0gsU0FBZ0IsY0FBYyxDQUFDLE1BQWlCLEVBQUUsY0FBdUI7SUFDckUsSUFBSSxNQUFNLEdBQUcsSUFBSSxLQUFLLEVBQVcsQ0FBQztJQUNsQyxLQUFpQixVQUFNLEVBQU4saUJBQU0sRUFBTixvQkFBTSxFQUFOLElBQU0sRUFBQztRQUFwQixJQUFJLEtBQUssZUFBQTtRQUNULElBQUcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFDO1lBQzdCLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDdEI7S0FDSjtJQUNELE9BQU8sTUFBTSxDQUFDO0FBQ2xCLENBQUM7QUFSRCx3Q0FRQyIsImZpbGUiOiIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog5ZCI5bm2XG4gKiBAcGFyYW0gcm93UG9pbnRzXG4gKiBAcGFyYW0gY29sUG9pbnRzXG4gKi9cbmV4cG9ydCAgZnVuY3Rpb24gbWVyZ2VQb2ludEFycmF5KHJvd1BvaW50cyA6IGNjLlZlYzJbXSwgY29sUG9pbnRzOiBjYy5WZWMyW10pe1xuICAgIGxldCByZXN1bHQgPSByb3dQb2ludHMuY29uY2F0KCk7XG4gICAgY29sUG9pbnRzID0gY29sUG9pbnRzLmZpbHRlcihmdW5jdGlvbiAoY29sRWxlKSB7XG4gICAgICAgIGxldCByZXBlYXQgPSBmYWxzZTtcbiAgICAgICAgcmVzdWx0LmZvckVhY2goZnVuY3Rpb24gKHJvd0VsZSkge1xuICAgICAgICAgICAgaWYoY29sRWxlLmVxdWFscyhyb3dFbGUpKXtcbiAgICAgICAgICAgICAgICByZXBlYXQgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgICByZXR1cm4gIXJlcGVhdDtcbiAgICB9LCB0aGlzKTtcbiAgICByZXN1bHQucHVzaCguLi5jb2xQb2ludHMpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICog5YeP5rOVXG4gKiBAcGFyYW0gcG9pbnRzXG4gKiBAcGFyYW0gZXhjbHVzaXZlUG9pbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4Y2x1c2l2ZVBvaW50KHBvaW50czogY2MuVmVjMltdLCBleGNsdXNpdmVQb2ludDogY2MuVmVjMil7XG4gICAgbGV0IHJlc3VsdCA9IG5ldyBBcnJheTxjYy5WZWMyPigpO1xuICAgIGZvcihsZXQgcG9pbnQgb2YgcG9pbnRzKXtcbiAgICAgICAgaWYoIXBvaW50LmVxdWFscyhleGNsdXNpdmVQb2ludCkpe1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gocG9pbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59Il19
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/View/GridView.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'd0d1fDj9rlDx5QUtP+2toQV', 'GridView');
// Script/View/GridView.js

"use strict";

var _ConstValue = require("../Model/ConstValue");

var _AudioUtils = _interopRequireDefault(require("../Utils/AudioUtils"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

cc.Class({
  "extends": cc.Component,
  properties: {
    // foo: {
    //    default: null,      // The default value will be used only when the component attaching
    //                           to a node for the first time
    //    url: cc.Texture2D,  // optional, default is typeof default
    //    serializable: true, // optional, default is true
    //    visible: true,      // optional, default is true
    //    displayName: 'Foo', // optional
    //    readonly: false,    // optional, default is false
    // },
    // ...
    aniPre: {
      "default": [],
      type: [cc.Prefab]
    },
    effectLayer: {
      "default": null,
      type: cc.Node
    },
    audioUtils: {
      type: _AudioUtils["default"],
      "default": null
    }
  },
  // use this for initialization
  onLoad: function onLoad() {
    this.setListener();
    this.lastTouchPos = cc.Vec2(-1, -1);
    this.isCanMove = true;
    this.isInPlayAni = false; // 是否在播放中
  },
  setController: function setController(controller) {
    this.controller = controller;
  },
  initWithCellModels: function initWithCellModels(cellsModels) {
    this.cellViews = [];

    for (var i = 1; i <= 9; i++) {
      this.cellViews[i] = [];

      for (var j = 1; j <= 9; j++) {
        var type = cellsModels[i][j].type;
        var aniView = cc.instantiate(this.aniPre[type]);
        aniView.parent = this.node;
        var cellViewScript = aniView.getComponent("CellView");
        cellViewScript.initWithModel(cellsModels[i][j]);
        this.cellViews[i][j] = aniView;
      }
    }
  },
  setListener: function setListener() {
    this.node.on(cc.Node.EventType.TOUCH_START, function (eventTouch) {
      if (this.isInPlayAni) {
        //播放动画中，不允许点击
        return true;
      }

      var touchPos = eventTouch.getLocation();
      var cellPos = this.convertTouchPosToCell(touchPos);

      if (cellPos) {
        var changeModels = this.selectCell(cellPos);
        this.isCanMove = changeModels.length < 3;
      } else {
        this.isCanMove = false;
      }

      return true;
    }, this); // 滑动操作逻辑

    this.node.on(cc.Node.EventType.TOUCH_MOVE, function (eventTouch) {
      if (this.isCanMove) {
        var startTouchPos = eventTouch.getStartLocation();
        var startCellPos = this.convertTouchPosToCell(startTouchPos);
        var touchPos = eventTouch.getLocation();
        var cellPos = this.convertTouchPosToCell(touchPos);

        if (startCellPos.x != cellPos.x || startCellPos.y != cellPos.y) {
          this.isCanMove = false;
          var changeModels = this.selectCell(cellPos);
        }
      }
    }, this);
    this.node.on(cc.Node.EventType.TOUCH_END, function (eventTouch) {// console.log("1111");
    }, this);
    this.node.on(cc.Node.EventType.TOUCH_CANCEL, function (eventTouch) {// console.log("1111");
    }, this);
  },
  // 根据点击的像素位置，转换成网格中的位置
  convertTouchPosToCell: function convertTouchPosToCell(pos) {
    pos = this.node.convertToNodeSpace(pos);

    if (pos.x < 0 || pos.x >= _ConstValue.GRID_PIXEL_WIDTH || pos.y < 0 || pos.y >= _ConstValue.GRID_PIXEL_HEIGHT) {
      return false;
    }

    var x = Math.floor(pos.x / _ConstValue.CELL_WIDTH) + 1;
    var y = Math.floor(pos.y / _ConstValue.CELL_HEIGHT) + 1;
    return cc.v2(x, y);
  },
  // 移动格子
  updateView: function updateView(changeModels) {
    var newCellViewInfo = [];

    for (var i in changeModels) {
      var model = changeModels[i];
      var viewInfo = this.findViewByModel(model);
      var view = null; // 如果原来的cell不存在，则新建

      if (!viewInfo) {
        var type = model.type;
        var aniView = cc.instantiate(this.aniPre[type]);
        aniView.parent = this.node;
        var cellViewScript = aniView.getComponent("CellView");
        cellViewScript.initWithModel(model);
        view = aniView;
      } // 如果已经存在
      else {
          view = viewInfo.view;
          this.cellViews[viewInfo.y][viewInfo.x] = null;
        }

      var cellScript = view.getComponent("CellView");
      cellScript.updateView(); // 执行移动动作

      if (!model.isDeath) {
        newCellViewInfo.push({
          model: model,
          view: view
        });
      }
    } // 重新标记this.cellviews的信息


    newCellViewInfo.forEach(function (ele) {
      var model = ele.model;
      this.cellViews[model.y][model.x] = ele.view;
    }, this);
  },
  // 显示选中的格子背景
  updateSelect: function updateSelect(pos) {
    for (var i = 1; i <= 9; i++) {
      for (var j = 1; j <= 9; j++) {
        if (this.cellViews[i][j]) {
          var cellScript = this.cellViews[i][j].getComponent("CellView");

          if (pos.x == j && pos.y == i) {
            cellScript.setSelect(true);
          } else {
            cellScript.setSelect(false);
          }
        }
      }
    }
  },

  /**
   * 根据cell的model返回对应的view
   */
  findViewByModel: function findViewByModel(model) {
    for (var i = 1; i <= 9; i++) {
      for (var j = 1; j <= 9; j++) {
        if (this.cellViews[i][j] && this.cellViews[i][j].getComponent("CellView").model == model) {
          return {
            view: this.cellViews[i][j],
            x: j,
            y: i
          };
        }
      }
    }

    return null;
  },
  getPlayAniTime: function getPlayAniTime(changeModels) {
    if (!changeModels) {
      return 0;
    }

    var maxTime = 0;
    changeModels.forEach(function (ele) {
      ele.cmd.forEach(function (cmd) {
        if (maxTime < cmd.playTime + cmd.keepTime) {
          maxTime = cmd.playTime + cmd.keepTime;
        }
      }, this);
    }, this);
    return maxTime;
  },
  // 获得爆炸次数， 同一个时间算一个
  getStep: function getStep(effectsQueue) {
    if (!effectsQueue) {
      return 0;
    }

    return effectsQueue.reduce(function (maxValue, efffectCmd) {
      return Math.max(maxValue, efffectCmd.step || 0);
    }, 0);
  },
  //一段时间内禁止操作
  disableTouch: function disableTouch(time, step) {
    if (time <= 0) {
      return;
    }

    this.isInPlayAni = true;
    this.node.runAction(cc.sequence(cc.delayTime(time), cc.callFunc(function () {
      this.isInPlayAni = false;
      this.audioUtils.playContinuousMatch(step);
    }, this)));
  },
  // 正常击中格子后的操作
  selectCell: function selectCell(cellPos) {
    var result = this.controller.selectCell(cellPos); // 直接先丢给model处理数据逻辑

    var changeModels = result[0]; // 有改变的cell，包含新生成的cell和生成马上摧毁的格子

    var effectsQueue = result[1]; //各种特效

    this.playEffect(effectsQueue);
    this.disableTouch(this.getPlayAniTime(changeModels), this.getStep(effectsQueue));
    this.updateView(changeModels);
    this.controller.cleanCmd();

    if (changeModels.length >= 2) {
      this.updateSelect(cc.v2(-1, -1));
      this.audioUtils.playSwap();
    } else {
      this.updateSelect(cellPos);
      this.audioUtils.playClick();
    }

    return changeModels;
  },
  playEffect: function playEffect(effectsQueue) {
    this.effectLayer.getComponent("EffectLayer").playEffects(effectsQueue);
  } // called every frame, uncomment this function to activate update callback
  // update: function (dt) {
  // },

});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvVmlldy9HcmlkVmlldy5qcyJdLCJuYW1lcyI6WyJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsImFuaVByZSIsInR5cGUiLCJQcmVmYWIiLCJlZmZlY3RMYXllciIsIk5vZGUiLCJhdWRpb1V0aWxzIiwiQXVkaW9VdGlscyIsIm9uTG9hZCIsInNldExpc3RlbmVyIiwibGFzdFRvdWNoUG9zIiwiVmVjMiIsImlzQ2FuTW92ZSIsImlzSW5QbGF5QW5pIiwic2V0Q29udHJvbGxlciIsImNvbnRyb2xsZXIiLCJpbml0V2l0aENlbGxNb2RlbHMiLCJjZWxsc01vZGVscyIsImNlbGxWaWV3cyIsImkiLCJqIiwiYW5pVmlldyIsImluc3RhbnRpYXRlIiwicGFyZW50Iiwibm9kZSIsImNlbGxWaWV3U2NyaXB0IiwiZ2V0Q29tcG9uZW50IiwiaW5pdFdpdGhNb2RlbCIsIm9uIiwiRXZlbnRUeXBlIiwiVE9VQ0hfU1RBUlQiLCJldmVudFRvdWNoIiwidG91Y2hQb3MiLCJnZXRMb2NhdGlvbiIsImNlbGxQb3MiLCJjb252ZXJ0VG91Y2hQb3NUb0NlbGwiLCJjaGFuZ2VNb2RlbHMiLCJzZWxlY3RDZWxsIiwibGVuZ3RoIiwiVE9VQ0hfTU9WRSIsInN0YXJ0VG91Y2hQb3MiLCJnZXRTdGFydExvY2F0aW9uIiwic3RhcnRDZWxsUG9zIiwieCIsInkiLCJUT1VDSF9FTkQiLCJUT1VDSF9DQU5DRUwiLCJwb3MiLCJjb252ZXJ0VG9Ob2RlU3BhY2UiLCJHUklEX1BJWEVMX1dJRFRIIiwiR1JJRF9QSVhFTF9IRUlHSFQiLCJNYXRoIiwiZmxvb3IiLCJDRUxMX1dJRFRIIiwiQ0VMTF9IRUlHSFQiLCJ2MiIsInVwZGF0ZVZpZXciLCJuZXdDZWxsVmlld0luZm8iLCJtb2RlbCIsInZpZXdJbmZvIiwiZmluZFZpZXdCeU1vZGVsIiwidmlldyIsImNlbGxTY3JpcHQiLCJpc0RlYXRoIiwicHVzaCIsImZvckVhY2giLCJlbGUiLCJ1cGRhdGVTZWxlY3QiLCJzZXRTZWxlY3QiLCJnZXRQbGF5QW5pVGltZSIsIm1heFRpbWUiLCJjbWQiLCJwbGF5VGltZSIsImtlZXBUaW1lIiwiZ2V0U3RlcCIsImVmZmVjdHNRdWV1ZSIsInJlZHVjZSIsIm1heFZhbHVlIiwiZWZmZmVjdENtZCIsIm1heCIsInN0ZXAiLCJkaXNhYmxlVG91Y2giLCJ0aW1lIiwicnVuQWN0aW9uIiwic2VxdWVuY2UiLCJkZWxheVRpbWUiLCJjYWxsRnVuYyIsInBsYXlDb250aW51b3VzTWF0Y2giLCJyZXN1bHQiLCJwbGF5RWZmZWN0IiwiY2xlYW5DbWQiLCJwbGF5U3dhcCIsInBsYXlDbGljayIsInBsYXlFZmZlY3RzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUVBOzs7O0FBRUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ1AsYUFBU0QsRUFBRSxDQUFDRSxTQURMO0FBR1BDLEVBQUFBLFVBQVUsRUFBRTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FDLElBQUFBLE1BQU0sRUFBRTtBQUNOLGlCQUFTLEVBREg7QUFFTkMsTUFBQUEsSUFBSSxFQUFFLENBQUNMLEVBQUUsQ0FBQ00sTUFBSjtBQUZBLEtBWEU7QUFlVkMsSUFBQUEsV0FBVyxFQUFFO0FBQ1gsaUJBQVMsSUFERTtBQUVYRixNQUFBQSxJQUFJLEVBQUVMLEVBQUUsQ0FBQ1E7QUFGRSxLQWZIO0FBbUJWQyxJQUFBQSxVQUFVLEVBQUU7QUFDVkosTUFBQUEsSUFBSSxFQUFFSyxzQkFESTtBQUVWLGlCQUFTO0FBRkM7QUFuQkYsR0FITDtBQThCUDtBQUNBQyxFQUFBQSxNQUFNLEVBQUUsa0JBQVk7QUFDbEIsU0FBS0MsV0FBTDtBQUNBLFNBQUtDLFlBQUwsR0FBb0JiLEVBQUUsQ0FBQ2MsSUFBSCxDQUFRLENBQUMsQ0FBVCxFQUFZLENBQUMsQ0FBYixDQUFwQjtBQUNBLFNBQUtDLFNBQUwsR0FBaUIsSUFBakI7QUFDQSxTQUFLQyxXQUFMLEdB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WixjQUFMLENBQW9CakMsWUFBcEIsQ0FBbEIsRUFBcUQsS0FBS3NDLE9BQUwsQ0FBYUMsWUFBYixDQUFyRDtBQUNBLFNBQUtuQixVQUFMLENBQWdCcEIsWUFBaEI7QUFDQSxTQUFLckIsVUFBTCxDQUFnQjJFLFFBQWhCOztBQUNBLFFBQUl0RCxZQUFZLENBQUNFLE1BQWIsSUFBdUIsQ0FBM0IsRUFBOEI7QUFDNUIsV0FBSzZCLFlBQUwsQ0FBa0J0RSxFQUFFLENBQUMwRCxFQUFILENBQU0sQ0FBQyxDQUFQLEVBQVUsQ0FBQyxDQUFYLENBQWxCO0FBQ0EsV0FBS2pELFVBQUwsQ0FBZ0JxRixRQUFoQjtBQUNELEtBSEQsTUFHTztBQUNMLFdBQUt4QixZQUFMLENBQWtCakMsT0FBbEI7QUFDQSxXQUFLNUIsVUFBTCxDQUFnQnNGLFNBQWhCO0FBQ0Q7O0FBQ0QsV0FBT3hELFlBQVA7QUFDRCxHQXpOTTtBQTBOUHFELEVBQUFBLFVBQVUsRUFBRSxvQkFBVWQsWUFBVixFQUF3QjtBQUNsQyxTQUFLdkUsV0FBTCxDQUFpQnNCLFlBQWpCLENBQThCLGFBQTlCLEVBQTZDbUUsV0FBN0MsQ0FBeURsQixZQUF6RDtBQUNELEdBNU5NLENBaU9QO0FBQ0E7QUFFQTs7QUFwT08sQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ0VMTF9XSURUSCwgQ0VMTF9IRUlHSFQsIEdSSURfUElYRUxfV0lEVEgsIEdSSURfUElYRUxfSEVJR0hULCBBTklUSU1FIH0gZnJvbSAnLi4vTW9kZWwvQ29uc3RWYWx1ZSc7XG5cbmltcG9ydCBBdWRpb1V0aWxzIGZyb20gXCIuLi9VdGlscy9BdWRpb1V0aWxzXCI7XG5cbmNjLkNsYXNzKHtcbiAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gIHByb3BlcnRpZXM6IHtcbiAgICAvLyBmb286IHtcbiAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcbiAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XG4gICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXG4gICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXG4gICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxuICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcbiAgICAvLyB9LFxuICAgIC8vIC4uLlxuICAgIGFuaVByZToge1xuICAgICAgZGVmYXVsdDogW10sXG4gICAgICB0eXBlOiBbY2MuUHJlZmFiXVxuICAgIH0sXG4gICAgZWZmZWN0TGF5ZXI6IHtcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgfSxcbiAgICBhdWRpb1V0aWxzOiB7XG4gICAgICB0eXBlOiBBdWRpb1V0aWxzLFxuICAgICAgZGVmYXVsdDogbnVsbFxuICAgIH1cblxuICB9LFxuXG5cbiAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXG4gIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc2V0TGlzdGVuZXIoKTtcbiAgICB0aGlzLmxhc3RUb3VjaFBvcyA9IGNjLlZlYzIoLTEsIC0xKTtcbiAgICB0aGlzLmlzQ2FuTW92ZSA9IHRydWU7XG4gICAgdGhpcy5pc0luUGxheUFuaSA9IGZhbHNlOyAvLyDmmK/lkKblnKjmkq3mlL7kuK1cbiAgfSxcbiAgc2V0Q29udHJvbGxlcjogZnVuY3Rpb24gKGNvbnRyb2xsZXIpIHtcbiAgICB0aGlzLmNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICB9LFxuXG4gIGluaXRXaXRoQ2VsbE1vZGVsczogZnVuY3Rpb24gKGNlbGxzTW9kZWxzKSB7XG4gICAgdGhpcy5jZWxsVmlld3MgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSA5OyBpKyspIHtcbiAgICAgIHRoaXMuY2VsbFZpZXdzW2ldID0gW107XG4gICAgICBmb3IgKHZhciBqID0gMTsgaiA8PSA5OyBqKyspIHtcbiAgICAgICAgdmFyIHR5cGUgPSBjZWxsc01vZGVsc1tpXVtqXS50eXBlO1xuICAgICAgICB2YXIgYW5pVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuYW5pUHJlW3R5cGVdKTtcbiAgICAgICAgYW5pVmlldy5wYXJlbnQgPSB0aGlzLm5vZGU7XG4gICAgICAgIHZhciBjZWxsVmlld1NjcmlwdCA9IGFuaVZpZXcuZ2V0Q29tcG9uZW50KFwiQ2VsbFZpZXdcIik7XG4gICAgICAgIGNlbGxWaWV3U2NyaXB0LmluaXRXaXRoTW9kZWwoY2VsbHNNb2RlbHNbaV1bal0pO1xuICAgICAgICB0aGlzLmNlbGxWaWV3c1tpXVtqXSA9IGFuaVZpZXc7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBzZXRMaXN0ZW5lcjogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgZnVuY3Rpb24gKGV2ZW50VG91Y2gpIHtcbiAgICAgIGlmICh0aGlzLmlzSW5QbGF5QW5pKSB7Ly/mkq3mlL7liqjnlLvkuK3vvIzkuI3lhYHorrjngrnlh7tcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICB2YXIgdG91Y2hQb3MgPSBldmVudFRvdWNoLmdldExvY2F0aW9uKCk7XG4gICAgICB2YXIgY2VsbFBvcyA9IHRoaXMuY29udmVydFRvdWNoUG9zVG9DZWxsKHRvdWNoUG9zKTtcbiAgICAgIGlmIChjZWxsUG9zKSB7XG4gICAgICAgIHZhciBjaGFuZ2VNb2RlbHMgPSB0aGlzLnNlbGVjdENlbGwoY2VsbFBvcyk7XG4gICAgICAgIHRoaXMuaXNDYW5Nb3ZlID0gY2hhbmdlTW9kZWxzLmxlbmd0aCA8IDM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmlzQ2FuTW92ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSwgdGhpcyk7XG4gICAgLy8g5ruR5Yqo5pON5L2c6YC76L6RXG4gICAgdGhpcy5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX01PVkUsIGZ1bmN0aW9uIChldmVudFRvdWNoKSB7XG4gICAgICBpZiAodGhpcy5pc0Nhbk1vdmUpIHtcbiAgICAgICAgdmFyIHN0YXJ0VG91Y2hQb3MgPSBldmVudFRvdWNoLmdldFN0YXJ0TG9jYXRpb24oKTtcbiAgICAgICAgdmFyIHN0YXJ0Q2VsbFBvcyA9IHRoaXMuY29udmVydFRvdWNoUG9zVG9DZWxsKHN0YXJ0VG91Y2hQb3MpO1xuICAgICAgICB2YXIgdG91Y2hQb3MgPSBldmVudFRvdWNoLmdldExvY2F0aW9uKCk7XG4gICAgICAgIHZhciBjZWxsUG9zID0gdGhpcy5jb252ZXJ0VG91Y2hQb3NUb0NlbGwodG91Y2hQb3MpO1xuICAgICAgICBpZiAoc3RhcnRDZWxsUG9zLnggIT0gY2VsbFBvcy54IHx8IHN0YXJ0Q2VsbFBvcy55ICE9IGNlbGxQb3MueSkge1xuICAgICAgICAgIHRoaXMuaXNDYW5Nb3ZlID0gZmFsc2U7XG4gICAgICAgICAgdmFyIGNoYW5nZU1vZGVscyA9IHRoaXMuc2VsZWN0Q2VsbChjZWxsUG9zKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICAgIHRoaXMubm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIGZ1bmN0aW9uIChldmVudFRvdWNoKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIjExMTFcIik7XG4gICAgfSwgdGhpcyk7XG4gICAgdGhpcy5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0NBTkNFTCwgZnVuY3Rpb24gKGV2ZW50VG91Y2gpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiMTExMVwiKTtcbiAgICB9LCB0aGlzKTtcbiAgfSxcbiAgLy8g5qC55o2u54K55Ye755qE5YOP57Sg5L2N572u77yM6L2s5o2i5oiQ572R5qC85Lit55qE5L2N572uXG4gIGNvbnZlcnRUb3VjaFBvc1RvQ2VsbDogZnVuY3Rpb24gKHBvcykge1xuICAgIHBvcyA9IHRoaXMubm9kZS5jb252ZXJ0VG9Ob2RlU3BhY2UocG9zKTtcbiAgICBpZiAocG9zLnggPCAwIHx8IHBvcy54ID49IEdSSURfUElYRUxfV0lEVEggfHwgcG9zLnkgPCAwIHx8IHBvcy55ID49IEdSSURfUElYRUxfSEVJR0hUKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb3MueCAvIENFTExfV0lEVEgpICsgMTtcbiAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9zLnkgLyBDRUxMX0hFSUdIVCkgKyAxO1xuICAgIHJldHVybiBjYy52Mih4LCB5KTtcbiAgfSxcbiAgLy8g56e75Yqo5qC85a2QXG4gIHVwZGF0ZVZpZXc6IGZ1bmN0aW9uIChjaGFuZ2VNb2RlbHMpIHtcbiAgICBsZXQgbmV3Q2VsbFZpZXdJbmZvID0gW107XG4gICAgZm9yICh2YXIgaSBpbiBjaGFuZ2VNb2RlbHMpIHtcbiAgICAgIHZhciBtb2RlbCA9IGNoYW5nZU1vZGVsc1tpXTtcbiAgICAgIHZhciB2aWV3SW5mbyA9IHRoaXMuZmluZFZpZXdCeU1vZGVsKG1vZGVsKTtcbiAgICAgIHZhciB2aWV3ID0gbnVsbDtcbiAgICAgIC8vIOWmguaenOWOn+adpeeahGNlbGzkuI3lrZjlnKjvvIzliJnmlrDlu7pcbiAgICAgIGlmICghdmlld0luZm8pIHtcbiAgICAgICAgdmFyIHR5cGUgPSBtb2RlbC50eXBlO1xuICAgICAgICB2YXIgYW5pVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuYW5pUHJlW3R5cGVdKTtcbiAgICAgICAgYW5pVmlldy5wYXJlbnQgPSB0aGlzLm5vZGU7XG4gICAgICAgIHZhciBjZWxsVmlld1NjcmlwdCA9IGFuaVZpZXcuZ2V0Q29tcG9uZW50KFwiQ2VsbFZpZXdcIik7XG4gICAgICAgIGNlbGxWaWV3U2NyaXB0LmluaXRXaXRoTW9kZWwobW9kZWwpO1xuICAgICAgICB2aWV3ID0gYW5pVmlldztcbiAgICAgIH1cbiAgICAgIC8vIOWmguaenOW3sue7j+WtmOWcqFxuICAgICAgZWxzZSB7XG4gICAgICAgIHZpZXcgPSB2aWV3SW5mby52aWV3O1xuICAgICAgICB0aGlzLmNlbGxWaWV3c1t2aWV3SW5mby55XVt2aWV3SW5mby54XSA9IG51bGw7XG4gICAgICB9XG4gICAgICB2YXIgY2VsbFNjcmlwdCA9IHZpZXcuZ2V0Q29tcG9uZW50KFwiQ2VsbFZpZXdcIik7XG4gICAgICBjZWxsU2NyaXB0LnVwZGF0ZVZpZXcoKTsvLyDmiafooYznp7vliqjliqjkvZxcbiAgICAgIGlmICghbW9kZWwuaXNEZWF0aCkge1xuICAgICAgICBuZXdDZWxsVmlld0luZm8ucHVzaCh7XG4gICAgICAgICAgbW9kZWw6IG1vZGVsLFxuICAgICAgICAgIHZpZXc6IHZpZXdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIOmHjeaWsOagh+iusHRoaXMuY2VsbHZpZXdz55qE5L+h5oGvXG4gICAgbmV3Q2VsbFZpZXdJbmZvLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgbGV0IG1vZGVsID0gZWxlLm1vZGVsO1xuICAgICAgdGhpcy5jZWxsVmlld3NbbW9kZWwueV1bbW9kZWwueF0gPSBlbGUudmlldztcbiAgICB9LCB0aGlzKTtcbiAgfSxcbiAgLy8g5pi+56S66YCJ5Lit55qE5qC85a2Q6IOM5pmvXG4gIHVwZGF0ZVNlbGVjdDogZnVuY3Rpb24gKHBvcykge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IDk7IGkrKykge1xuICAgICAgZm9yICh2YXIgaiA9IDE7IGogPD0gOTsgaisrKSB7XG4gICAgICAgIGlmICh0aGlzLmNlbGxWaWV3c1tpXVtqXSkge1xuICAgICAgICAgIHZhciBjZWxsU2NyaXB0ID0gdGhpcy5jZWxsVmlld3NbaV1bal0uZ2V0Q29tcG9uZW50KFwiQ2VsbFZpZXdcIik7XG4gICAgICAgICAgaWYgKHBvcy54ID09IGogJiYgcG9zLnkgPT0gaSkge1xuICAgICAgICAgICAgY2VsbFNjcmlwdC5zZXRTZWxlY3QodHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2VsbFNjcmlwdC5zZXRTZWxlY3QoZmFsc2UpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICAvKipcbiAgICog5qC55o2uY2VsbOeahG1vZGVs6L+U5Zue5a+55bqU55qEdmlld1xuICAgKi9cbiAgZmluZFZpZXdCeU1vZGVsOiBmdW5jdGlvbiAobW9kZWwpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSA5OyBpKyspIHtcbiAgICAgIGZvciAodmFyIGogPSAxOyBqIDw9IDk7IGorKykge1xuICAgICAgICBpZiAodGhpcy5jZWxsVmlld3NbaV1bal0gJiYgdGhpcy5jZWxsVmlld3NbaV1bal0uZ2V0Q29tcG9uZW50KFwiQ2VsbFZpZXdcIikubW9kZWwgPT0gbW9kZWwpIHtcbiAgICAgICAgICByZXR1cm4geyB2aWV3OiB0aGlzLmNlbGxWaWV3c1tpXVtqXSwgeDogaiwgeTogaSB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9LFxuICBnZXRQbGF5QW5pVGltZTogZnVuY3Rpb24gKGNoYW5nZU1vZGVscykge1xuICAgIGlmICghY2hhbmdlTW9kZWxzKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgdmFyIG1heFRpbWUgPSAwO1xuICAgIGNoYW5nZU1vZGVscy5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgIGVsZS5jbWQuZm9yRWFjaChmdW5jdGlvbiAoY21kKSB7XG4gICAgICAgIGlmIChtYXhUaW1lIDwgY21kLnBsYXlUaW1lICsgY21kLmtlZXBUaW1lKSB7XG4gICAgICAgICAgbWF4VGltZSA9IGNtZC5wbGF5VGltZSArIGNtZC5rZWVwVGltZTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcylcbiAgICB9LCB0aGlzKTtcbiAgICByZXR1cm4gbWF4VGltZTtcbiAgfSxcbiAgLy8g6I635b6X54iG54K45qyh5pWw77yMIOWQjOS4gOS4quaXtumXtOeul+S4gOS4qlxuICBnZXRTdGVwOiBmdW5jdGlvbiAoZWZmZWN0c1F1ZXVlKSB7XG4gICAgaWYgKCFlZmZlY3RzUXVldWUpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gZWZmZWN0c1F1ZXVlLnJlZHVjZShmdW5jdGlvbiAobWF4VmFsdWUsIGVmZmZlY3RDbWQpIHtcbiAgICAgIHJldHVybiBNYXRoLm1heChtYXhWYWx1ZSwgZWZmZmVjdENtZC5zdGVwIHx8IDApO1xuICAgIH0sIDApO1xuICB9LFxuICAvL+S4gOauteaXtumXtOWGheemgeatouaTjeS9nFxuICBkaXNhYmxlVG91Y2g6IGZ1bmN0aW9uICh0aW1lLCBzdGVwKSB7XG4gICAgaWYgKHRpbWUgPD0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmlzSW5QbGF5QW5pID0gdHJ1ZTtcbiAgICB0aGlzLm5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLmRlbGF5VGltZSh0aW1lKSwgY2MuY2FsbEZ1bmMoZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5pc0luUGxheUFuaSA9IGZhbHNlO1xuICAgICAgdGhpcy5hdWRpb1V0aWxzLnBsYXlDb250aW51b3VzTWF0Y2goc3RlcCk7XG4gICAgfSwgdGhpcykpKTtcbiAgfSxcbiAgLy8g5q2j5bi45Ye75Lit5qC85a2Q5ZCO55qE5pON5L2cXG4gIHNlbGVjdENlbGw6IGZ1bmN0aW9uIChjZWxsUG9zKSB7XG4gICAgdmFyIHJlc3VsdCA9IHRoaXMuY29udHJvbGxlci5zZWxlY3RDZWxsKGNlbGxQb3MpOyAvLyDnm7TmjqXlhYjkuKLnu5ltb2RlbOWkhOeQhuaVsOaNrumAu+i+kVxuICAgIHZhciBjaGFuZ2VNb2RlbHMgPSByZXN1bHRbMF07IC8vIOacieaUueWPmOeahGNlbGzvvIzljIXlkKvmlrDnlJ/miJDnmoRjZWxs5ZKM55Sf5oiQ6ams5LiK5pGn5q+B55qE5qC85a2QXG4gICAgdmFyIGVmZmVjdHNRdWV1ZSA9IHJlc3VsdFsxXTsgLy/lkITnp43nibnmlYhcbiAgICB0aGlzLnBsYXlFZmZlY3QoZWZmZWN0c1F1ZXVlKTtcbiAgICB0aGlzLmRpc2FibGVUb3VjaCh0aGlzLmdldFBsYXlBbmlUaW1lKGNoYW5nZU1vZGVscyksIHRoaXMuZ2V0U3RlcChlZmZlY3RzUXVldWUpKTtcbiAgICB0aGlzLnVwZGF0ZVZpZXcoY2hhbmdlTW9kZWxzKTtcbiAgICB0aGlzLmNvbnRyb2xsZXIuY2xlYW5DbWQoKTtcbiAgICBpZiAoY2hhbmdlTW9kZWxzLmxlbmd0aCA+PSAyKSB7XG4gICAgICB0aGlzLnVwZGF0ZVNlbGVjdChjYy52MigtMSwgLTEpKTtcbiAgICAgIHRoaXMuYXVkaW9VdGlscy5wbGF5U3dhcCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnVwZGF0ZVNlbGVjdChjZWxsUG9zKTtcbiAgICAgIHRoaXMuYXVkaW9VdGlscy5wbGF5Q2xpY2soKTtcbiAgICB9XG4gICAgcmV0dXJuIGNoYW5nZU1vZGVscztcbiAgfSxcbiAgcGxheUVmZmVjdDogZnVuY3Rpb24gKGVmZmVjdHNRdWV1ZSkge1xuICAgIHRoaXMuZWZmZWN0TGF5ZXIuZ2V0Q29tcG9uZW50KFwiRWZmZWN0TGF5ZXJcIikucGxheUVmZmVjdHMoZWZmZWN0c1F1ZXVlKTtcbiAgfVxuXG5cblxuXG4gIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXG4gIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XG5cbiAgLy8gfSxcbn0pO1xuIl19
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Controller/LoginController.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5f4845Bus5AQoZakK7KAXht', 'LoginController');
// Script/Controller/LoginController.js

"use strict";

var _AudioUtils = _interopRequireDefault(require("../Utils/AudioUtils"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

cc.Class({
  "extends": cc.Component,
  properties: {
    loadingBar: {
      type: cc.ProgressBar,
      "default": null
    },
    loginButton: {
      type: cc.Button,
      "default": null
    },
    worldSceneBGM: {
      type: cc.AudioClip,
      "default": null
    }
  },
  onLoad: function onLoad() {
    this.gameSceneBGMAudioId = cc.audioEngine.play(this.worldSceneBGM, true, 1);
  },
  onLogin: function onLogin() {
    var _this = this;

    this.last = 0;
    this.loadingBar.node.active = true;
    this.loginButton.node.active = false;
    this.loadingBar.progress = 0;
    this.loadingBar.barSprite.fillRange = 0;

    cc.loader.onProgress = function (count, amount, item) {
      var progress = (count / amount).toFixed(2);

      if (progress > _this.loadingBar.barSprite.fillRange) {
        _this.loadingBar.barSprite.fillRange = count / amount;
      }
    };

    cc.director.preloadScene("Game", function () {
      this.loadingBar.node.active = false;
      this.loginButton.node.active = false; // cc.log("加载成功");

      cc.director.loadScene("Game");
    }.bind(this));
  },
  onDestroy: function onDestroy() {
    cc.audioEngine.stop(this.gameSceneBGMAudioId);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvQ29udHJvbGxlci9Mb2dpbkNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJsb2FkaW5nQmFyIiwidHlwZSIsIlByb2dyZXNzQmFyIiwibG9naW5CdXR0b24iLCJCdXR0b24iLCJ3b3JsZFNjZW5lQkdNIiwiQXVkaW9DbGlwIiwib25Mb2FkIiwiZ2FtZVNjZW5lQkdNQXVkaW9JZCIsImF1ZGlvRW5naW5lIiwicGxheSIsIm9uTG9naW4iLCJsYXN0Iiwibm9kZSIsImFjdGl2ZSIsInByb2dyZXNzIiwiYmFyU3ByaXRlIiwiZmlsbFJhbmdlIiwibG9hZGVyIiwib25Qcm9ncmVzcyIsImNvdW50IiwiYW1vdW50IiwiaXRlbSIsInRvRml4ZWQiLCJkaXJlY3RvciIsInByZWxvYWRTY2VuZSIsImxvYWRTY2VuZSIsImJpbmQiLCJvbkRlc3Ryb3kiLCJzdG9wIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7O0FBRUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ1AsYUFBU0QsRUFBRSxDQUFDRSxTQURMO0FBR1BDLEVBQUFBLFVBQVUsRUFBRTtBQUNWQyxJQUFBQSxVQUFVLEVBQUU7QUFDVkMsTUFBQUEsSUFBSSxFQUFFTCxFQUFFLENBQUNNLFdBREM7QUFFVixpQkFBUztBQUZDLEtBREY7QUFLVkMsSUFBQUEsV0FBVyxFQUFFO0FBQ1hGLE1BQUFBLElBQUksRUFBRUwsRUFBRSxDQUFDUSxNQURFO0FBRVgsaUJBQVM7QUFGRSxLQUxIO0FBU1ZDLElBQUFBLGFBQWEsRUFBRTtBQUNiSixNQUFBQSxJQUFJLEVBQUVMLEVBQUUsQ0FBQ1UsU0FESTtBQUViLGlCQUFTO0FBRkk7QUFUTCxHQUhMO0FBa0JQQyxFQUFBQSxNQWxCTyxvQkFrQkU7QUFDUCxTQUFLQyxtQkFBTCxHQUEyQlosRUFBRSxDQUFDYSxXQUFILENBQWVDLElBQWYsQ0FBb0IsS0FBS0wsYUFBekIsRUFBd0MsSUFBeEMsRUFBOEMsQ0FBOUMsQ0FBM0I7QUFDRCxHQXBCTTtBQXNCUE0sRUFBQUEsT0FBTyxFQUFFLG1CQUFZO0FBQUE7O0FBQ25CLFNBQUtDLElBQUwsR0FBWSxDQUFaO0FBQ0EsU0FBS1osVUFBTCxDQUFnQmEsSUFBaEIsQ0FBcUJDLE1BQXJCLEdBQThCLElBQTlCO0FBQ0EsU0FBS1gsV0FBTCxDQUFpQlUsSUFBakIsQ0FBc0JDLE1BQXRCLEdBQStCLEtBQS9CO0FBQ0EsU0FBS2QsVUFBTCxDQUFnQmUsUUFBaEIsR0FBMkIsQ0FBM0I7QUFDQSxTQUFLZixVQUFMLENBQWdCZ0IsU0FBaEIsQ0FBMEJDLFNBQTFCLEdBQXNDLENBQXRDOztBQUNBckIsSUFBQUEsRUFBRSxDQUFDc0IsTUFBSCxDQUFVQyxVQUFWLEdBQXVCLFVBQUNDLEtBQUQsRUFBUUMsTUFBUixFQUFnQkMsSUFBaEIsRUFBeUI7QUFDOUMsVUFBSVAsUUFBUSxHQUFHLENBQUNLLEtBQUssR0FBR0MsTUFBVCxFQUFpQkUsT0FBakIsQ0FBeUIsQ0FBekIsQ0FBZjs7QUFDQSxVQUFJUixRQUFRLEdBQUcsS0FBSSxDQUFDZixVQUFMLENBQWdCZ0IsU0FBaEIsQ0FBMEJDLFNBQXpDLEVBQW9EO0FBQ2xELFFBQUEsS0FBSSxDQUFDakIsVUFBTCxDQUFnQmdCLFNBQWhCLENBQTBCQyxTQUExQixHQUFzQ0csS0FBSyxHQUFHQyxNQUE5QztBQUNEO0FBQ0YsS0FMRDs7QUFNQXpCLElBQUFBLEVBQUUsQ0FBQzRCLFFBQUgsQ0FBWUMsWUFBWixDQUF5QixNQUF6QixFQUFpQyxZQUFZO0FBQzNDLFdBQUt6QixVQUFMLENBQWdCYSxJQUFoQixDQUFxQkMsTUFBckIsR0FBOEIsS0FBOUI7QUFDQSxXQUFLWCxXQUFMLENBQWlCVSxJQUFqQixDQUFzQkMsTUFBdEIsR0FBK0IsS0FBL0IsQ0FGMkMsQ0FHM0M7O0FBQ0FsQixNQUFBQSxFQUFFLENBQUM0QixRQUFILENBQVlFLFNBQVosQ0FBc0IsTUFBdEI7QUFDRCxLQUxnQyxDQUsvQkMsSUFMK0IsQ0FLMUIsSUFMMEIsQ0FBakM7QUFNRCxHQXhDTTtBQTBDUEMsRUFBQUEsU0FBUyxFQUFFLHFCQUFZO0FBQ3JCaEMsSUFBQUEsRUFBRSxDQUFDYSxXQUFILENBQWVvQixJQUFmLENBQW9CLEtBQUtyQixtQkFBekI7QUFDRDtBQTVDTSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQXVkaW9VdGlscyBmcm9tIFwiLi4vVXRpbHMvQXVkaW9VdGlsc1wiO1xuXG5jYy5DbGFzcyh7XG4gIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICBwcm9wZXJ0aWVzOiB7XG4gICAgbG9hZGluZ0Jhcjoge1xuICAgICAgdHlwZTogY2MuUHJvZ3Jlc3NCYXIsXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gICAgbG9naW5CdXR0b246IHtcbiAgICAgIHR5cGU6IGNjLkJ1dHRvbixcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgfSxcbiAgICB3b3JsZFNjZW5lQkdNOiB7XG4gICAgICB0eXBlOiBjYy5BdWRpb0NsaXAsXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH1cbiAgfSxcblxuICBvbkxvYWQoKSB7XG4gICAgdGhpcy5nYW1lU2NlbmVCR01BdWRpb0lkID0gY2MuYXVkaW9FbmdpbmUucGxheSh0aGlzLndvcmxkU2NlbmVCR00sIHRydWUsIDEpO1xuICB9LFxuXG4gIG9uTG9naW46IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmxhc3QgPSAwO1xuICAgIHRoaXMubG9hZGluZ0Jhci5ub2RlLmFjdGl2ZSA9IHRydWU7XG4gICAgdGhpcy5sb2dpbkJ1dHRvbi5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMubG9hZGluZ0Jhci5wcm9ncmVzcyA9IDA7XG4gICAgdGhpcy5sb2FkaW5nQmFyLmJhclNwcml0ZS5maWxsUmFuZ2UgPSAwO1xuICAgIGNjLmxvYWRlci5vblByb2dyZXNzID0gKGNvdW50LCBhbW91bnQsIGl0ZW0pID0+IHtcbiAgICAgIGxldCBwcm9ncmVzcyA9IChjb3VudCAvIGFtb3VudCkudG9GaXhlZCgyKTtcbiAgICAgIGlmIChwcm9ncmVzcyA+IHRoaXMubG9hZGluZ0Jhci5iYXJTcHJpdGUuZmlsbFJhbmdlKSB7XG4gICAgICAgIHRoaXMubG9hZGluZ0Jhci5iYXJTcHJpdGUuZmlsbFJhbmdlID0gY291bnQgLyBhbW91bnQ7XG4gICAgICB9XG4gICAgfTtcbiAgICBjYy5kaXJlY3Rvci5wcmVsb2FkU2NlbmUoXCJHYW1lXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMubG9hZGluZ0Jhci5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgdGhpcy5sb2dpbkJ1dHRvbi5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgLy8gY2MubG9nKFwi5Yqg6L295oiQ5YqfXCIpO1xuICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKFwiR2FtZVwiKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICB9LFxuXG4gIG9uRGVzdHJveTogZnVuY3Rpb24gKCkge1xuICAgIGNjLmF1ZGlvRW5naW5lLnN0b3AodGhpcy5nYW1lU2NlbmVCR01BdWRpb0lkKTtcbiAgfVxufSk7XG4iXX0=
//------QC-SOURCE-SPLIT------

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Utils/Toast.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7775bvWKyFNCa465R+EmYU0', 'Toast');
// Script/Utils/Toast.js

"use strict";

//一个简单的tost组件，用法：
// let Toast = reqire('Toast.js')
// Toast(text,{gravity,duration,bg_color})
//text:要显示的字符串
//gravity(可选):位置，String类型，可选值('CENTER','TOP','BOTTOM'),默认为'CENTER'
//duration(可选):时间，Number类型，单位为秒，默认1s
//bg_color(可选):颜色，cc.color类型，默认cc.color(102, 102, 102, 200)
function Toast(text, _temp) {
  if (text === void 0) {
    text = "";
  }

  var _ref = _temp === void 0 ? {} : _temp,
      _ref$gravity = _ref.gravity,
      gravity = _ref$gravity === void 0 ? "CENTER" : _ref$gravity,
      _ref$duration = _ref.duration,
      duration = _ref$duration === void 0 ? 1 : _ref$duration,
      _ref$bg_color = _ref.bg_color,
      bg_color = _ref$bg_color === void 0 ? cc.color(102, 102, 102, 200) : _ref$bg_color;

  // canvas
  var canvas = cc.director.getScene().getComponentInChildren(cc.Canvas);
  var width = canvas.node.width;
  var height = canvas.node.height;
  var bgNode = new cc.Node(); // Lable文本格式设置

  var textNode = new cc.Node();
  var textLabel = textNode.addComponent(cc.Label);
  textLabel.horizontalAlign = cc.Label.HorizontalAlign.CENTER;
  textLabel.verticalAlign = cc.Label.VerticalAlign.CENTER;
  textLabel.fontSize = 30;
  textLabel.string = text; // 当文本宽度过长时，设置为自动换行格式

  if (text.length * textLabel.fontSize > width * 3 / 5) {
    textNode.width = width * 3 / 5;
    textLabel.overflow = cc.Label.Overflow.RESIZE_HEIGHT;
  } else {
    textNode.width = text.length * textLabel.fontSize;
  }

  var lineCount = ~~(text.length * textLabel.fontSize / (width * 3 / 5)) + 1;
  textNode.height = textLabel.fontSize * lineCount; // 背景设置

  var ctx = bgNode.addComponent(cc.Graphics);
  ctx.arc(-textNode.width / 2, 0, textNode.height / 2 + 20, 0.5 * Math.PI, 1.5 * Math.PI, true);
  ctx.lineTo(textNode.width / 2, -(textNode.height / 2 + 20));
  ctx.arc(textNode.width / 2, 0, textNode.height / 2 + 20, 1.5 * Math.PI, 0.5 * Math.PI, true);
  ctx.lineTo(-textNode.width / 2, textNode.height / 2 + 20);
  ctx.fillColor = bg_color;
  ctx.fill();
  bgNode.addChild(textNode); // gravity 设置Toast显示的位置

  if (gravity === "CENTER") {
    bgNode.y = 0;
    bgNode.x = 0;
  } else if (gravity === "TOP") {
    bgNode.y = bgNode.y + height / 5 * 2;
  } else if (gravity === "BOTTOM") {
    bgNode.y = bgNode.y - height / 5 * 2;
  }

  canvas.node.addChild(bgNode);
  var finished = cc.callFunc(function () {
    bgNode.destroy();
  });
  var action = cc.sequence(cc.moveBy(duration, cc.v2(0, 0)), cc.fadeOut(0.3), finished);
  bgNode.runAction(action);
}

module.exports = Toast;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvVXRpbHMvVG9hc3QuanMiXSwibmFtZXMiOlsiVG9hc3QiLCJ0ZXh0IiwiZ3Jhdml0eSIsImR1cmF0aW9uIiwiYmdfY29sb3IiLCJjYyIsImNvbG9yIiwiY2FudmFzIiwiZGlyZWN0b3IiLCJnZXRTY2VuZSIsImdldENvbXBvbmVudEluQ2hpbGRyZW4iLCJDYW52YXMiLCJ3aWR0aCIsIm5vZGUiLCJoZWlnaHQiLCJiZ05vZGUiLCJOb2RlIiwidGV4dE5vZGUiLCJ0ZXh0TGFiZWwiLCJhZGRDb21wb25lbnQiLCJMYWJlbCIsImhvcml6b250YWxBbGlnbiIsIkhvcml6b250YWxBbGlnbiIsIkNFTlRFUiIsInZlcnRpY2FsQWxpZ24iLCJWZXJ0aWNhbEFsaWduIiwiZm9udFNpemUiLCJzdHJpbmciLCJsZW5ndGgiLCJvdmVyZmxvdyIsIk92ZXJmbG93IiwiUkVTSVpFX0hFSUdIVCIsImxpbmVDb3VudCIsImN0eCIsIkdyYXBoaWNzIiwiYXJjIiwiTWF0aCIsIlBJIiwibGluZVRvIiwiZmlsbENvbG9yIiwiZmlsbCIsImFkZENoaWxkIiwieSIsIngiLCJmaW5pc2hlZCIsImNhbGxGdW5jIiwiZGVzdHJveSIsImFjdGlvbiIsInNlcXVlbmNlIiwibW92ZUJ5IiwidjIiLCJmYWRlT3V0IiwicnVuQWN0aW9uIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVNBLEtBQVQsQ0FDRUMsSUFERixTQU9FO0FBQUEsTUFOQUEsSUFNQTtBQU5BQSxJQUFBQSxJQU1BLEdBTk8sRUFNUDtBQUFBOztBQUFBLGdDQURJLEVBQ0o7QUFBQSwwQkFKRUMsT0FJRjtBQUFBLE1BSkVBLE9BSUYsNkJBSlksUUFJWjtBQUFBLDJCQUhFQyxRQUdGO0FBQUEsTUFIRUEsUUFHRiw4QkFIYSxDQUdiO0FBQUEsMkJBRkVDLFFBRUY7QUFBQSxNQUZFQSxR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LEVBQUUsQ0FBQzhDLE9BQUgsQ0FBVyxHQUFYLENBRlcsRUFHWFAsUUFIVyxDQUFiO0FBS0E3QixFQUFBQSxNQUFNLENBQUNxQyxTQUFQLENBQWlCTCxNQUFqQjtBQUNEOztBQUVETSxNQUFNLENBQUNDLE9BQVAsR0FBaUJ0RCxLQUFqQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiLy/kuIDkuKrnroDljZXnmoR0b3N057uE5Lu277yM55So5rOV77yaXG4vLyBsZXQgVG9hc3QgPSByZXFpcmUoJ1RvYXN0LmpzJylcbi8vIFRvYXN0KHRleHQse2dyYXZpdHksZHVyYXRpb24sYmdfY29sb3J9KVxuLy90ZXh0OuimgeaYvuekuueahOWtl+espuS4slxuLy9ncmF2aXR5KOWPr+mAiSk65L2N572u77yMU3RyaW5n57G75Z6L77yM5Y+v6YCJ5YC8KCdDRU5URVInLCdUT1AnLCdCT1RUT00nKSzpu5jorqTkuLonQ0VOVEVSJ1xuLy9kdXJhdGlvbijlj6/pgIkpOuaXtumXtO+8jE51bWJlcuexu+Wei++8jOWNleS9jeS4uuenku+8jOm7mOiupDFzXG4vL2JnX2NvbG9yKOWPr+mAiSk66aKc6Imy77yMY2MuY29sb3LnsbvlnovvvIzpu5jorqRjYy5jb2xvcigxMDIsIDEwMiwgMTAyLCAyMDApXG5mdW5jdGlvbiBUb2FzdChcbiAgdGV4dCA9IFwiXCIsXG4gIHtcbiAgICBncmF2aXR5ID0gXCJDRU5URVJcIixcbiAgICBkdXJhdGlvbiA9IDEsXG4gICAgYmdfY29sb3IgPSBjYy5jb2xvcigxMDIsIDEwMiwgMTAyLCAyMDApXG4gIH0gPSB7fVxuKSB7XG4gIC8vIGNhbnZhc1xuICBsZXQgY2FudmFzID0gY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5nZXRDb21wb25lbnRJbkNoaWxkcmVuKGNjLkNhbnZhcyk7XG4gIGxldCB3aWR0aCA9IGNhbnZhcy5ub2RlLndpZHRoO1xuICBsZXQgaGVpZ2h0ID0gY2FudmFzLm5vZGUuaGVpZ2h0O1xuXG4gIGxldCBiZ05vZGUgPSBuZXcgY2MuTm9kZSgpO1xuXG4gIC8vIExhYmxl5paH5pys5qC85byP6K6+572uXG4gIGxldCB0ZXh0Tm9kZSA9IG5ldyBjYy5Ob2RlKCk7XG4gIGxldCB0ZXh0TGFiZWwgPSB0ZXh0Tm9kZS5hZGRDb21wb25lbnQoY2MuTGFiZWwpO1xuICB0ZXh0TGFiZWwuaG9yaXpvbnRhbEFsaWduID0gY2MuTGFiZWwuSG9yaXpvbnRhbEFsaWduLkNFTlRFUjtcbiAgdGV4dExhYmVsLnZlcnRpY2FsQWxpZ24gPSBjYy5MYWJlbC5WZXJ0aWNhbEFsaWduLkNFTlRFUjtcbiAgdGV4dExhYmVsLmZvbnRTaXplID0gMzA7XG4gIHRleHRMYWJlbC5zdHJpbmcgPSB0ZXh0O1xuXG4gIC8vIOW9k+aWh+acrOWuveW6pui/h+mVv+aXtu+8jOiuvue9ruS4uuiHquWKqOaNouihjOagvOW8j1xuICBpZiAodGV4dC5sZW5ndGggKiB0ZXh0TGFiZWwuZm9udFNpemUgPiAod2lkdGggKiAzKSAvIDUpIHtcbiAgICB0ZXh0Tm9kZS53aWR0aCA9ICh3aWR0aCAqIDMpIC8gNTtcbiAgICB0ZXh0TGFiZWwub3ZlcmZsb3cgPSBjYy5MYWJlbC5PdmVyZmxvdy5SRVNJWkVfSEVJR0hUO1xuICB9IGVsc2Uge1xuICAgIHRleHROb2RlLndpZHRoID0gdGV4dC5sZW5ndGggKiB0ZXh0TGFiZWwuZm9udFNpemU7XG4gIH1cbiAgbGV0IGxpbmVDb3VudCA9XG4gICAgfn4oKHRleHQubGVuZ3RoICogdGV4dExhYmVsLmZvbnRTaXplKSAvICgod2lkdGggKiAzKSAvIDUpKSArIDE7XG4gIHRleHROb2RlLmhlaWdodCA9IHRleHRMYWJlbC5mb250U2l6ZSAqIGxpbmVDb3VudDtcblxuICAvLyDog4zmma/orr7nva5cbiAgbGV0IGN0eCA9IGJnTm9kZS5hZGRDb21wb25lbnQoY2MuR3JhcGhpY3MpO1xuICBjdHguYXJjKFxuICAgIC10ZXh0Tm9kZS53aWR0aCAvIDIsXG4gICAgMCxcbiAgICB0ZXh0Tm9kZS5oZWlnaHQgLyAyICsgMjAsXG4gICAgMC41ICogTWF0aC5QSSxcbiAgICAxLjUgKiBNYXRoLlBJLFxuICAgIHRydWVcbiAgKTtcbiAgY3R4LmxpbmVUbyh0ZXh0Tm9kZS53aWR0aCAvIDIsIC0odGV4dE5vZGUuaGVpZ2h0IC8gMiArIDIwKSk7XG4gIGN0eC5hcmMoXG4gICAgdGV4dE5vZGUud2lkdGggLyAyLFxuICAgIDAsXG4gICAgdGV4dE5vZGUuaGVpZ2h0IC8gMiArIDIwLFxuICAgIDEuNSAqIE1hdGguUEksXG4gICAgMC41ICogTWF0aC5QSSxcbiAgICB0cnVlXG4gICk7XG4gIGN0eC5saW5lVG8oLXRleHROb2RlLndpZHRoIC8gMiwgdGV4dE5vZGUuaGVpZ2h0IC8gMiArIDIwKTtcbiAgY3R4LmZpbGxDb2xvciA9IGJnX2NvbG9yO1xuICBjdHguZmlsbCgpO1xuXG4gIGJnTm9kZS5hZGRDaGlsZCh0ZXh0Tm9kZSk7XG5cbiAgLy8gZ3Jhdml0eSDorr7nva5Ub2FzdOaYvuekuueahOS9jee9rlxuICBpZiAoZ3Jhdml0eSA9PT0gXCJDRU5URVJcIikge1xuICAgIGJnTm9kZS55ID0gMDtcbiAgICBiZ05vZGUueCA9IDA7XG4gIH0gZWxzZSBpZiAoZ3Jhdml0eSA9PT0gXCJUT1BcIikge1xuICAgIGJnTm9kZS55ID0gYmdOb2RlLnkgKyAoaGVpZ2h0IC8gNSkgKiAyO1xuICB9IGVsc2UgaWYgKGdyYXZpdHkgPT09IFwiQk9UVE9NXCIpIHtcbiAgICBiZ05vZGUueSA9IGJnTm9kZS55IC0gKGhlaWdodCAvIDUpICogMjtcbiAgfVxuXG4gIGNhbnZhcy5ub2RlLmFkZENoaWxkKGJnTm9kZSk7XG5cbiAgbGV0IGZpbmlzaGVkID0gY2MuY2FsbEZ1bmMoZnVuY3Rpb24oKSB7XG4gICAgYmdOb2RlLmRlc3Ryb3koKTtcbiAgfSk7XG4gIGxldCBhY3Rpb24gPSBjYy5zZXF1ZW5jZShcbiAgICBjYy5tb3ZlQnkoZHVyYXRpb24sIGNjLnYyKDAsIDApKSxcbiAgICBjYy5mYWRlT3V0KDAuMyksXG4gICAgZmluaXNoZWRcbiAgKTtcbiAgYmdOb2RlLnJ1bkFjdGlvbihhY3Rpb24pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFRvYXN0OyJdfQ==
//------QC-SOURCE-SPLIT------
